#!/usr/bin/ruby

puts <<END
; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -mcpu=kv3-1 -O1 -o - %s | FileCheck %s --check-prefixes=CV1
; RUN: clang -O1 -march=kv3-1 -c -o /dev/null %s
; RUN: llc -mcpu=kv3-2 -O1 -o - %s | FileCheck %s --check-prefixes=CV2
; RUN: clang -O1 -march=kv3-2 -c -o /dev/null %s
;
; Generated with llvm/utils/Target/KVX/copro-regs.rb script.
; Please modify the script to modify the tests in this file.
;
; This test showcases register allocation on coprocessor.
; On CV1, only $a0..$a47 registers should be used
; On CV2, only $a0..$a63 registers should be used

target triple = "kvx-kalray-cos"

define void @move_all(ptr %from, ptr %to) {
END

(0..63).each do |i|
  puts "  %from.addr.#{i} = getelementptr <256 x i1>, ptr %from, i64 #{i}"
  puts "  %reg.#{i} = load <256 x i1>, ptr %from.addr.#{i}"
end

(0..63).each do |i|
  puts "  %to.addr.#{i} = getelementptr <256 x i1>, ptr %to, i64 #{i}"
  puts "  store <256 x i1> %reg.#{i}, ptr %to.addr.#{i}"
end

puts <<END
  ret void
}
END
