; NOTE: Assertions have been autogenerated by utils/update_analyze_test_checks.py
; RUN: opt -mcpu=kv3-1 -mtriple=kvx-kalray-cos -passes='print<cost-model>' -cost-kind=throughput -disable-output %s 2>&1 | FileCheck %s --check-prefixes=ALL,CV1
; RUN: opt -mcpu=kv3-2 -mtriple=kvx-kalray-cos -passes='print<cost-model>' -cost-kind=throughput -disable-output %s 2>&1 | FileCheck %s --check-prefixes=ALL,CV2

target triple = "kvx-kalray-cos"

define void @scalar_scalar_select() {
; ALL-LABEL: 'scalar_scalar_select'
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %i1 = select i1 undef, i1 undef, i1 undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %i8 = select i1 undef, i8 undef, i8 undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %f16 = select i1 undef, half undef, half undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %i16 = select i1 undef, i16 undef, i16 undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %f32 = select i1 undef, float undef, float undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %i32 = select i1 undef, i32 undef, i32 undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %f64 = select i1 undef, double undef, double undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %i64 = select i1 undef, i64 undef, i64 undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %i128 = select i1 undef, i128 undef, i128 undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: ret void
;
  %i1  = select i1 undef, i1 undef, i1 undef
  %i8  = select i1 undef, i8 undef, i8 undef
  %f16  = select i1 undef, half undef, half undef
  %i16  = select i1 undef, i16 undef, i16 undef
  %f32  = select i1 undef, float undef, float undef
  %i32  = select i1 undef, i32 undef, i32 undef
  %f64  = select i1 undef, double undef, double undef
  %i64  = select i1 undef, i64 undef, i64 undef
  %i128  = select i1 undef, i128 undef, i128 undef

  ret void
}

define void @scalar_vector_select_i1() {
; ALL-LABEL: 'scalar_vector_select_i1'
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2i1 = select i1 undef, <2 x i1> undef, <2 x i1> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4i1 = select i1 undef, <4 x i1> undef, <4 x i1> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v8i1 = select i1 undef, <8 x i1> undef, <8 x i1> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v16i1 = select i1 undef, <16 x i1> undef, <16 x i1> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v32i1 = select i1 undef, <32 x i1> undef, <32 x i1> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2i8 = select i1 undef, <2 x i8> undef, <2 x i8> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4i8 = select i1 undef, <4 x i8> undef, <4 x i8> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v8i8 = select i1 undef, <8 x i8> undef, <8 x i8> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v16i8 = select i1 undef, <16 x i8> undef, <16 x i8> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v32i8 = select i1 undef, <32 x i8> undef, <32 x i8> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2f16 = select i1 undef, <2 x half> undef, <2 x half> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4f16 = select i1 undef, <4 x half> undef, <4 x half> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v8f16 = select i1 undef, <8 x half> undef, <8 x half> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v16f16 = select i1 undef, <16 x half> undef, <16 x half> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %v32f16 = select i1 undef, <32 x half> undef, <32 x half> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2i16 = select i1 undef, <2 x i16> undef, <2 x i16> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4i16 = select i1 undef, <4 x i16> undef, <4 x i16> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v8i16 = select i1 undef, <8 x i16> undef, <8 x i16> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v16i16 = select i1 undef, <16 x i16> undef, <16 x i16> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %v32i16 = select i1 undef, <32 x i16> undef, <32 x i16> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2f32 = select i1 undef, <2 x float> undef, <2 x float> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4f32 = select i1 undef, <4 x float> undef, <4 x float> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v8f32 = select i1 undef, <8 x float> undef, <8 x float> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %v16f32 = select i1 undef, <16 x float> undef, <16 x float> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 4 for instruction: %v32f32 = select i1 undef, <32 x float> undef, <32 x float> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2i32 = select i1 undef, <2 x i32> undef, <2 x i32> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4i32 = select i1 undef, <4 x i32> undef, <4 x i32> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v8i32 = select i1 undef, <8 x i32> undef, <8 x i32> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %v16i32 = select i1 undef, <16 x i32> undef, <16 x i32> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 4 for instruction: %v32i32 = select i1 undef, <32 x i32> undef, <32 x i32> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2f64 = select i1 undef, <2 x double> undef, <2 x double> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4f64 = select i1 undef, <4 x double> undef, <4 x double> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %v8f64 = select i1 undef, <8 x double> undef, <8 x double> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 4 for instruction: %v16f64 = select i1 undef, <16 x double> undef, <16 x double> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 8 for instruction: %v32f64 = select i1 undef, <32 x double> undef, <32 x double> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2i64 = select i1 undef, <2 x i64> undef, <2 x i64> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4i64 = select i1 undef, <4 x i64> undef, <4 x i64> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %v8i64 = select i1 undef, <8 x i64> undef, <8 x i64> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 4 for instruction: %v16i64 = select i1 undef, <16 x i64> undef, <16 x i64> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 8 for instruction: %v32i64 = select i1 undef, <32 x i64> undef, <32 x i64> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: ret void
;
  %v2i1  = select i1 undef, <2 x i1> undef, <2 x i1> undef
  %v4i1  = select i1 undef, <4 x i1> undef, <4 x i1> undef
  %v8i1  = select i1 undef, <8 x i1> undef, <8 x i1> undef
  %v16i1  = select i1 undef, <16 x i1> undef, <16 x i1> undef
  %v32i1  = select i1 undef, <32 x i1> undef, <32 x i1> undef

  %v2i8  = select i1 undef, <2 x i8> undef, <2 x i8> undef
  %v4i8  = select i1 undef, <4 x i8> undef, <4 x i8> undef
  %v8i8  = select i1 undef, <8 x i8> undef, <8 x i8> undef
  %v16i8  = select i1 undef, <16 x i8> undef, <16 x i8> undef
  %v32i8  = select i1 undef, <32 x i8> undef, <32 x i8> undef

  %v2f16  = select i1 undef, <2 x half> undef, <2 x half> undef
  %v4f16  = select i1 undef, <4 x half> undef, <4 x half> undef
  %v8f16  = select i1 undef, <8 x half> undef, <8 x half> undef
  %v16f16  = select i1 undef, <16 x half> undef, <16 x half> undef
  %v32f16  = select i1 undef, <32 x half> undef, <32 x half> undef

  %v2i16  = select i1 undef, <2 x i16> undef, <2 x i16> undef
  %v4i16  = select i1 undef, <4 x i16> undef, <4 x i16> undef
  %v8i16  = select i1 undef, <8 x i16> undef, <8 x i16> undef
  %v16i16  = select i1 undef, <16 x i16> undef, <16 x i16> undef
  %v32i16  = select i1 undef, <32 x i16> undef, <32 x i16> undef

  %v2f32  = select i1 undef, <2 x float> undef, <2 x float> undef
  %v4f32  = select i1 undef, <4 x float> undef, <4 x float> undef
  %v8f32  = select i1 undef, <8 x float> undef, <8 x float> undef
  %v16f32  = select i1 undef, <16 x float> undef, <16 x float> undef
  %v32f32  = select i1 undef, <32 x float> undef, <32 x float> undef

  %v2i32  = select i1 undef, <2 x i32> undef, <2 x i32> undef
  %v4i32  = select i1 undef, <4 x i32> undef, <4 x i32> undef
  %v8i32  = select i1 undef, <8 x i32> undef, <8 x i32> undef
  %v16i32  = select i1 undef, <16 x i32> undef, <16 x i32> undef
  %v32i32  = select i1 undef, <32 x i32> undef, <32 x i32> undef

  %v2f64  = select i1 undef, <2 x double> undef, <2 x double> undef
  %v4f64  = select i1 undef, <4 x double> undef, <4 x double> undef
  %v8f64  = select i1 undef, <8 x double> undef, <8 x double> undef
  %v16f64  = select i1 undef, <16 x double> undef, <16 x double> undef
  %v32f64  = select i1 undef, <32 x double> undef, <32 x double> undef

  %v2i64  = select i1 undef, <2 x i64> undef, <2 x i64> undef
  %v4i64  = select i1 undef, <4 x i64> undef, <4 x i64> undef
  %v8i64  = select i1 undef, <8 x i64> undef, <8 x i64> undef
  %v16i64  = select i1 undef, <16 x i64> undef, <16 x i64> undef
  %v32i64  = select i1 undef, <32 x i64> undef, <32 x i64> undef

  ret void
}

define void @vector_select_i8() {
; CV1-LABEL: 'vector_select_i8'
; CV1-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2i8 = select <2 x i1> undef, <2 x i8> undef, <2 x i8> undef
; CV1-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4i8 = select <4 x i1> undef, <4 x i8> undef, <4 x i8> undef
; CV1-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v8i8 = select <8 x i1> undef, <8 x i8> undef, <8 x i8> undef
; CV1-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v16i8 = select <16 x i1> undef, <16 x i8> undef, <16 x i8> undef
; CV1-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %v32i8 = select <32 x i1> undef, <32 x i8> undef, <32 x i8> undef
; CV1-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: ret void
;
; CV2-LABEL: 'vector_select_i8'
; CV2-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2i8 = select <2 x i1> undef, <2 x i8> undef, <2 x i8> undef
; CV2-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4i8 = select <4 x i1> undef, <4 x i8> undef, <4 x i8> undef
; CV2-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v8i8 = select <8 x i1> undef, <8 x i8> undef, <8 x i8> undef
; CV2-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v16i8 = select <16 x i1> undef, <16 x i8> undef, <16 x i8> undef
; CV2-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v32i8 = select <32 x i1> undef, <32 x i8> undef, <32 x i8> undef
; CV2-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: ret void
;
  %v2i8  = select <2 x i1> undef, <2 x i8> undef, <2 x i8> undef
  %v4i8  = select <4 x i1> undef, <4 x i8> undef, <4 x i8> undef
  %v8i8  = select <8 x i1> undef, <8 x i8> undef, <8 x i8> undef
  %v16i8  = select <16 x i1> undef, <16 x i8> undef, <16 x i8> undef
  %v32i8  = select <32 x i1> undef, <32 x i8> undef, <32 x i8> undef

  ret void
}

define void @vector_select() {
; ALL-LABEL: 'vector_select'
; ALL-NEXT:  Cost Model: Invalid cost for instruction: %v2i1 = select <2 x i1> undef, <2 x i1> undef, <2 x i1> undef
; ALL-NEXT:  Cost Model: Invalid cost for instruction: %v4i1 = select <4 x i1> undef, <4 x i1> undef, <4 x i1> undef
; ALL-NEXT:  Cost Model: Invalid cost for instruction: %v8i1 = select <8 x i1> undef, <8 x i1> undef, <8 x i1> undef
; ALL-NEXT:  Cost Model: Invalid cost for instruction: %v16i1 = select <16 x i1> undef, <16 x i1> undef, <16 x i1> undef
; ALL-NEXT:  Cost Model: Invalid cost for instruction: %v32i1 = select <32 x i1> undef, <32 x i1> undef, <32 x i1> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2f16 = select <2 x i1> undef, <2 x half> undef, <2 x half> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4f16 = select <4 x i1> undef, <4 x half> undef, <4 x half> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v8f16 = select <8 x i1> undef, <8 x half> undef, <8 x half> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v16f16 = select <16 x i1> undef, <16 x half> undef, <16 x half> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %v32f16 = select <32 x i1> undef, <32 x half> undef, <32 x half> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2i16 = select <2 x i1> undef, <2 x i16> undef, <2 x i16> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4i16 = select <4 x i1> undef, <4 x i16> undef, <4 x i16> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v8i16 = select <8 x i1> undef, <8 x i16> undef, <8 x i16> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v16i16 = select <16 x i1> undef, <16 x i16> undef, <16 x i16> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %v32i16 = select <32 x i1> undef, <32 x i16> undef, <32 x i16> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2f32 = select <2 x i1> undef, <2 x float> undef, <2 x float> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4f32 = select <4 x i1> undef, <4 x float> undef, <4 x float> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v8f32 = select <8 x i1> undef, <8 x float> undef, <8 x float> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %v16f32 = select <16 x i1> undef, <16 x float> undef, <16 x float> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 4 for instruction: %v32f32 = select <32 x i1> undef, <32 x float> undef, <32 x float> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2i32 = select <2 x i1> undef, <2 x i32> undef, <2 x i32> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4i32 = select <4 x i1> undef, <4 x i32> undef, <4 x i32> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v8i32 = select <8 x i1> undef, <8 x i32> undef, <8 x i32> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %v16i32 = select <16 x i1> undef, <16 x i32> undef, <16 x i32> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 4 for instruction: %v32i32 = select <32 x i1> undef, <32 x i32> undef, <32 x i32> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2f64 = select <2 x i1> undef, <2 x double> undef, <2 x double> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4f64 = select <4 x i1> undef, <4 x double> undef, <4 x double> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %v8f64 = select <8 x i1> undef, <8 x double> undef, <8 x double> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 4 for instruction: %v16f64 = select <16 x i1> undef, <16 x double> undef, <16 x double> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 8 for instruction: %v32f64 = select <32 x i1> undef, <32 x double> undef, <32 x double> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v2i64 = select <2 x i1> undef, <2 x i64> undef, <2 x i64> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %v4i64 = select <4 x i1> undef, <4 x i64> undef, <4 x i64> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %v8i64 = select <8 x i1> undef, <8 x i64> undef, <8 x i64> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 4 for instruction: %v16i64 = select <16 x i1> undef, <16 x i64> undef, <16 x i64> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 8 for instruction: %v32i64 = select <32 x i1> undef, <32 x i64> undef, <32 x i64> undef
; ALL-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: ret void
;
  %v2i1  = select <2 x i1> undef, <2 x i1> undef, <2 x i1> undef
  %v4i1  = select <4 x i1> undef, <4 x i1> undef, <4 x i1> undef
  %v8i1  = select <8 x i1> undef, <8 x i1> undef, <8 x i1> undef
  %v16i1  = select <16 x i1> undef, <16 x i1> undef, <16 x i1> undef
  %v32i1  = select <32 x i1> undef, <32 x i1> undef, <32 x i1> undef

  %v2f16  = select <2 x i1> undef, <2 x half> undef, <2 x half> undef
  %v4f16  = select <4 x i1> undef, <4 x half> undef, <4 x half> undef
  %v8f16  = select <8 x i1> undef, <8 x half> undef, <8 x half> undef
  %v16f16  = select <16 x i1> undef, <16 x half> undef, <16 x half> undef
  %v32f16  = select <32 x i1> undef, <32 x half> undef, <32 x half> undef

  %v2i16  = select <2 x i1> undef, <2 x i16> undef, <2 x i16> undef
  %v4i16  = select <4 x i1> undef, <4 x i16> undef, <4 x i16> undef
  %v8i16  = select <8 x i1> undef, <8 x i16> undef, <8 x i16> undef
  %v16i16  = select <16 x i1> undef, <16 x i16> undef, <16 x i16> undef
  %v32i16  = select <32 x i1> undef, <32 x i16> undef, <32 x i16> undef

  %v2f32  = select <2 x i1> undef, <2 x float> undef, <2 x float> undef
  %v4f32  = select <4 x i1> undef, <4 x float> undef, <4 x float> undef
  %v8f32  = select <8 x i1> undef, <8 x float> undef, <8 x float> undef
  %v16f32  = select <16 x i1> undef, <16 x float> undef, <16 x float> undef
  %v32f32  = select <32 x i1> undef, <32 x float> undef, <32 x float> undef

  %v2i32  = select <2 x i1> undef, <2 x i32> undef, <2 x i32> undef
  %v4i32  = select <4 x i1> undef, <4 x i32> undef, <4 x i32> undef
  %v8i32  = select <8 x i1> undef, <8 x i32> undef, <8 x i32> undef
  %v16i32  = select <16 x i1> undef, <16 x i32> undef, <16 x i32> undef
  %v32i32  = select <32 x i1> undef, <32 x i32> undef, <32 x i32> undef

  %v2f64  = select <2 x i1> undef, <2 x double> undef, <2 x double> undef
  %v4f64  = select <4 x i1> undef, <4 x double> undef, <4 x double> undef
  %v8f64  = select <8 x i1> undef, <8 x double> undef, <8 x double> undef
  %v16f64  = select <16 x i1> undef, <16 x double> undef, <16 x double> undef
  %v32f64  = select <32 x i1> undef, <32 x double> undef, <32 x double> undef

  %v2i64  = select <2 x i1> undef, <2 x i64> undef, <2 x i64> undef
  %v4i64  = select <4 x i1> undef, <4 x i64> undef, <4 x i64> undef
  %v8i64  = select <8 x i1> undef, <8 x i64> undef, <8 x i64> undef
  %v16i64  = select <16 x i1> undef, <16 x i64> undef, <16 x i64> undef
  %v32i64  = select <32 x i1> undef, <32 x i64> undef, <32 x i64> undef

  ret void
}
