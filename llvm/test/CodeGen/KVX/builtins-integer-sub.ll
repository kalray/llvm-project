; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -o - %s | FileCheck %s
target triple = "kvx-kalray-cos"

define <8 x i8> @sbfbo(<8 x i8> %0, <8 x i8> %1) {
; CHECK-LABEL: sbfbo:
; CHECK:       # %bb.0:
; CHECK-NEXT:    andd $r3 = $r0, 0x7f7f7f7f7f7f7f7f
; CHECK-NEXT:    nxord $r0 = $r1, $r0
; CHECK-NEXT:    ord $r2 = $r1, 0x8080808080808080
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfd $r1 = $r3, $r2
; CHECK-NEXT:    andd $r0 = $r0, 0x8080808080808080
; CHECK-NEXT:    ;;
; CHECK-NEXT:    xord $r0 = $r0, $r1
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = sub <8 x i8> %1, %0
  ret <8 x i8> %3
}

define <8 x i8> @sbfbo_s(<8 x i8> %0, <8 x i8> %1) {
; CHECK-LABEL: sbfbo_s:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbmm8 $r2 = $r1, 0x4000200004000100
; CHECK-NEXT:    sbmm8 $r3 = $r0, 0x4000200004000100
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r1 = $r1, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r0 = $r0, 0xff00ff00ff00ff00
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfshq $r0 = $r0, $r1
; CHECK-NEXT:    sbfshq $r2 = $r3, $r2
; CHECK-NEXT:    ;;
; CHECK-NEXT:    srlhqs $r1 = $r2, 8
; CHECK-NEXT:    andd $r0 = $r0, 0xff00ff00ff00ff00
; CHECK-NEXT:    ;;
; CHECK-NEXT:    ord $r0 = $r0, $r1
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <8 x i8> @llvm.ssub.sat.v8i8(<8 x i8> %1, <8 x i8> %0)
  ret <8 x i8> %3
}

declare <8 x i8> @llvm.ssub.sat.v8i8(<8 x i8>, <8 x i8>) #2

define <8 x i8> @sbfbo_us(<8 x i8> %0, <8 x i8> %1) {
; CHECK-LABEL: sbfbo_us:
; CHECK:       # %bb.0:
; CHECK-NEXT:    andd $r2 = $r1, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r3 = $r0, 0xff00ff00ff00ff00
; CHECK-NEXT:    sllhqs $r1 = $r1, 8
; CHECK-NEXT:    sllhqs $r0 = $r0, 8
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfhq $r3 = $r3, $r2
; CHECK-NEXT:    sbfhq $r0 = $r0, $r1
; CHECK-NEXT:    ;;
; CHECK-NEXT:    compnhq.leu $r2 = $r3, $r2
; CHECK-NEXT:    compnhq.leu $r1 = $r0, $r1
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r0 = $r1, $r0
; CHECK-NEXT:    andd $r2 = $r2, $r3
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r1 = $r2, 0xff00ff00ff00ff00
; CHECK-NEXT:    srlhqs $r0 = $r0, 8
; CHECK-NEXT:    ;;
; CHECK-NEXT:    ord $r0 = $r0, $r1
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <8 x i8> @llvm.usub.sat.v8i8(<8 x i8> %1, <8 x i8> %0)
  ret <8 x i8> %3
}

declare <8 x i8> @llvm.usub.sat.v8i8(<8 x i8>, <8 x i8>) #2

define <16 x i8> @sbfbx(<16 x i8> %0, <16 x i8> %1) {
; CHECK-LABEL: sbfbx:
; CHECK:       # %bb.0:
; CHECK-NEXT:    andd $r5 = $r0, 0x7f7f7f7f7f7f7f7f
; CHECK-NEXT:    nxord $r0 = $r2, $r0
; CHECK-NEXT:    ord $r4 = $r2, 0x8080808080808080
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r6 = $r1, 0x7f7f7f7f7f7f7f7f
; CHECK-NEXT:    ord $r2 = $r3, 0x8080808080808080
; CHECK-NEXT:    nxord $r1 = $r3, $r1
; CHECK-NEXT:    sbfd $r3 = $r5, $r4
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r0 = $r0, 0x8080808080808080
; CHECK-NEXT:    sbfd $r2 = $r6, $r2
; CHECK-NEXT:    andd $r1 = $r1, 0x8080808080808080
; CHECK-NEXT:    ;;
; CHECK-NEXT:    xord $r0 = $r0, $r3
; CHECK-NEXT:    xord $r1 = $r1, $r2
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = sub <16 x i8> %1, %0
  ret <16 x i8> %3
}

define <16 x i8> @sbfbx_s(<16 x i8> %0, <16 x i8> %1) {
; CHECK-LABEL: sbfbx_s:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbmm8 $r4 = $r2, 0x4000200004000100
; CHECK-NEXT:    sbmm8 $r5 = $r0, 0x4000200004000100
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r2 = $r2, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r0 = $r0, 0xff00ff00ff00ff00
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbmm8 $r6 = $r3, 0x4000200004000100
; CHECK-NEXT:    sbmm8 $r7 = $r1, 0x4000200004000100
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r3 = $r3, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r1 = $r1, 0xff00ff00ff00ff00
; CHECK-NEXT:    sbfshq $r0 = $r0, $r2
; CHECK-NEXT:    sbfshq $r4 = $r5, $r4
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfshq $r1 = $r1, $r3
; CHECK-NEXT:    sbfshq $r2 = $r7, $r6
; CHECK-NEXT:    ;;
; CHECK-NEXT:    srlhqs $r3 = $r4, 8
; CHECK-NEXT:    andd $r0 = $r0, 0xff00ff00ff00ff00
; CHECK-NEXT:    srlhqs $r2 = $r2, 8
; CHECK-NEXT:    andd $r1 = $r1, 0xff00ff00ff00ff00
; CHECK-NEXT:    ;;
; CHECK-NEXT:    ord $r0 = $r0, $r3
; CHECK-NEXT:    ord $r1 = $r1, $r2
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <16 x i8> @llvm.ssub.sat.v16i8(<16 x i8> %1, <16 x i8> %0)
  ret <16 x i8> %3
}

declare <16 x i8> @llvm.ssub.sat.v16i8(<16 x i8>, <16 x i8>) #2

define <16 x i8> @sbfbx_us(<16 x i8> %0, <16 x i8> %1) {
; CHECK-LABEL: sbfbx_us:
; CHECK:       # %bb.0:
; CHECK-NEXT:    andd $r4 = $r2, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r5 = $r0, 0xff00ff00ff00ff00
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r6 = $r3, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r7 = $r1, 0xff00ff00ff00ff00
; CHECK-NEXT:    sllhqs $r2 = $r2, 8
; CHECK-NEXT:    sllhqs $r0 = $r0, 8
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sllhqs $r3 = $r3, 8
; CHECK-NEXT:    sllhqs $r1 = $r1, 8
; CHECK-NEXT:    sbfhq $r5 = $r5, $r4
; CHECK-NEXT:    sbfhq $r7 = $r7, $r6
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfhq $r0 = $r0, $r2
; CHECK-NEXT:    sbfhq $r1 = $r1, $r3
; CHECK-NEXT:    compnhq.leu $r4 = $r5, $r4
; CHECK-NEXT:    compnhq.leu $r6 = $r7, $r6
; CHECK-NEXT:    ;;
; CHECK-NEXT:    compnhq.leu $r2 = $r0, $r2
; CHECK-NEXT:    compnhq.leu $r3 = $r1, $r3
; CHECK-NEXT:    andd $r4 = $r4, $r5
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r0 = $r2, $r0
; CHECK-NEXT:    andd $r2 = $r6, $r7
; CHECK-NEXT:    andd $r1 = $r3, $r1
; CHECK-NEXT:    andd $r3 = $r4, 0xff00ff00ff00ff00
; CHECK-NEXT:    ;;
; CHECK-NEXT:    srlhqs $r0 = $r0, 8
; CHECK-NEXT:    andd $r2 = $r2, 0xff00ff00ff00ff00
; CHECK-NEXT:    srlhqs $r1 = $r1, 8
; CHECK-NEXT:    ;;
; CHECK-NEXT:    ord $r0 = $r0, $r3
; CHECK-NEXT:    ord $r1 = $r1, $r2
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <16 x i8> @llvm.usub.sat.v16i8(<16 x i8> %1, <16 x i8> %0)
  ret <16 x i8> %3
}

declare <16 x i8> @llvm.usub.sat.v16i8(<16 x i8>, <16 x i8>) #2

define <32 x i8> @sbfbv(<32 x i8> %0, <32 x i8> %1) {
; CHECK-LABEL: sbfbv:
; CHECK:       # %bb.0:
; CHECK-NEXT:    andd $r9 = $r0, 0x7f7f7f7f7f7f7f7f
; CHECK-NEXT:    ord $r8 = $r4, 0x8080808080808080
; CHECK-NEXT:    nxord $r0 = $r4, $r0
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r10 = $r1, 0x7f7f7f7f7f7f7f7f
; CHECK-NEXT:    ord $r4 = $r5, 0x8080808080808080
; CHECK-NEXT:    nxord $r1 = $r5, $r1
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r11 = $r2, 0x7f7f7f7f7f7f7f7f
; CHECK-NEXT:    ord $r5 = $r6, 0x8080808080808080
; CHECK-NEXT:    nxord $r2 = $r6, $r2
; CHECK-NEXT:    ;;
; CHECK-NEXT:    ord $r6 = $r7, 0x8080808080808080
; CHECK-NEXT:    nxord $r7 = $r7, $r3
; CHECK-NEXT:    andd $r3 = $r3, 0x7f7f7f7f7f7f7f7f
; CHECK-NEXT:    sbfd $r8 = $r9, $r8
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r0 = $r0, 0x8080808080808080
; CHECK-NEXT:    sbfd $r4 = $r10, $r4
; CHECK-NEXT:    andd $r1 = $r1, 0x8080808080808080
; CHECK-NEXT:    sbfd $r3 = $r3, $r6
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r6 = $r7, 0x8080808080808080
; CHECK-NEXT:    sbfd $r5 = $r11, $r5
; CHECK-NEXT:    andd $r2 = $r2, 0x8080808080808080
; CHECK-NEXT:    xord $r0 = $r0, $r8
; CHECK-NEXT:    ;;
; CHECK-NEXT:    xord $r1 = $r1, $r4
; CHECK-NEXT:    xord $r2 = $r2, $r5
; CHECK-NEXT:    xord $r3 = $r6, $r3
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = sub <32 x i8> %1, %0
  ret <32 x i8> %3
}

define <32 x i8> @sbfbv_s(<32 x i8> %0, <32 x i8> %1) {
; CHECK-LABEL: sbfbv_s:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbmm8 $r8 = $r4, 0x4000200004000100
; CHECK-NEXT:    sbmm8 $r9 = $r0, 0x4000200004000100
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r4 = $r4, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r0 = $r0, 0xff00ff00ff00ff00
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbmm8 $r10 = $r5, 0x4000200004000100
; CHECK-NEXT:    sbmm8 $r11 = $r1, 0x4000200004000100
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r5 = $r5, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r1 = $r1, 0xff00ff00ff00ff00
; CHECK-NEXT:    sbfshq $r0 = $r0, $r4
; CHECK-NEXT:    sbfshq $r8 = $r9, $r8
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfshq $r4 = $r11, $r10
; CHECK-NEXT:    sbfshq $r1 = $r1, $r5
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbmm8 $r5 = $r6, 0x4000200004000100
; CHECK-NEXT:    sbmm8 $r9 = $r2, 0x4000200004000100
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r6 = $r6, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r2 = $r2, 0xff00ff00ff00ff00
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbmm8 $r10 = $r7, 0x4000200004000100
; CHECK-NEXT:    sbmm8 $r11 = $r3, 0x4000200004000100
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r7 = $r7, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r3 = $r3, 0xff00ff00ff00ff00
; CHECK-NEXT:    sbfshq $r2 = $r2, $r6
; CHECK-NEXT:    sbfshq $r5 = $r9, $r5
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r0 = $r0, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r1 = $r1, 0xff00ff00ff00ff00
; CHECK-NEXT:    sbfshq $r3 = $r3, $r7
; CHECK-NEXT:    sbfshq $r6 = $r11, $r10
; CHECK-NEXT:    ;;
; CHECK-NEXT:    srlhqs $r7 = $r8, 8
; CHECK-NEXT:    srlhqs $r4 = $r4, 8
; CHECK-NEXT:    andd $r2 = $r2, 0xff00ff00ff00ff00
; CHECK-NEXT:    ;;
; CHECK-NEXT:    srlhqs $r5 = $r5, 8
; CHECK-NEXT:    srlhqs $r6 = $r6, 8
; CHECK-NEXT:    andd $r3 = $r3, 0xff00ff00ff00ff00
; CHECK-NEXT:    ord $r0 = $r0, $r7
; CHECK-NEXT:    ;;
; CHECK-NEXT:    ord $r1 = $r1, $r4
; CHECK-NEXT:    ord $r2 = $r2, $r5
; CHECK-NEXT:    ord $r3 = $r3, $r6
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <32 x i8> @llvm.ssub.sat.v32i8(<32 x i8> %1, <32 x i8> %0)
  ret <32 x i8> %3
}

declare <32 x i8> @llvm.ssub.sat.v32i8(<32 x i8>, <32 x i8>) #2

define <32 x i8> @sbfbv_us(<32 x i8> %0, <32 x i8> %1) {
; CHECK-LABEL: sbfbv_us:
; CHECK:       # %bb.0:
; CHECK-NEXT:    andd $r8 = $r4, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r9 = $r0, 0xff00ff00ff00ff00
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r10 = $r5, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r11 = $r1, 0xff00ff00ff00ff00
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r15 = $r6, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r16 = $r2, 0xff00ff00ff00ff00
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r17 = $r7, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r32 = $r3, 0xff00ff00ff00ff00
; CHECK-NEXT:    sllhqs $r4 = $r4, 8
; CHECK-NEXT:    sllhqs $r0 = $r0, 8
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfhq $r9 = $r9, $r8
; CHECK-NEXT:    sbfhq $r11 = $r11, $r10
; CHECK-NEXT:    sllhqs $r5 = $r5, 8
; CHECK-NEXT:    sllhqs $r1 = $r1, 8
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfhq $r16 = $r16, $r15
; CHECK-NEXT:    sbfhq $r32 = $r32, $r17
; CHECK-NEXT:    sllhqs $r6 = $r6, 8
; CHECK-NEXT:    sllhqs $r2 = $r2, 8
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfhq $r0 = $r0, $r4
; CHECK-NEXT:    compnhq.leu $r8 = $r9, $r8
; CHECK-NEXT:    sllhqs $r7 = $r7, 8
; CHECK-NEXT:    sllhqs $r3 = $r3, 8
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfhq $r1 = $r1, $r5
; CHECK-NEXT:    compnhq.leu $r10 = $r11, $r10
; CHECK-NEXT:    sbfhq $r2 = $r2, $r6
; CHECK-NEXT:    compnhq.leu $r4 = $r0, $r4
; CHECK-NEXT:    ;;
; CHECK-NEXT:    compnhq.leu $r15 = $r16, $r15
; CHECK-NEXT:    compnhq.leu $r17 = $r32, $r17
; CHECK-NEXT:    sbfhq $r3 = $r3, $r7
; CHECK-NEXT:    compnhq.leu $r5 = $r1, $r5
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r8 = $r8, $r9
; CHECK-NEXT:    compnhq.leu $r6 = $r2, $r6
; CHECK-NEXT:    andd $r0 = $r4, $r0
; CHECK-NEXT:    andd $r4 = $r10, $r11
; CHECK-NEXT:    ;;
; CHECK-NEXT:    compnhq.leu $r7 = $r3, $r7
; CHECK-NEXT:    andd $r1 = $r5, $r1
; CHECK-NEXT:    andd $r5 = $r15, $r16
; CHECK-NEXT:    andd $r2 = $r6, $r2
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r6 = $r17, $r32
; CHECK-NEXT:    srlhqs $r0 = $r0, 8
; CHECK-NEXT:    andd $r4 = $r4, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r3 = $r7, $r3
; CHECK-NEXT:    ;;
; CHECK-NEXT:    srlhqs $r1 = $r1, 8
; CHECK-NEXT:    andd $r7 = $r8, 0xff00ff00ff00ff00
; CHECK-NEXT:    andd $r5 = $r5, 0xff00ff00ff00ff00
; CHECK-NEXT:    srlhqs $r2 = $r2, 8
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r6 = $r6, 0xff00ff00ff00ff00
; CHECK-NEXT:    srlhqs $r3 = $r3, 8
; CHECK-NEXT:    ord $r0 = $r0, $r7
; CHECK-NEXT:    ord $r1 = $r1, $r4
; CHECK-NEXT:    ;;
; CHECK-NEXT:    ord $r2 = $r2, $r5
; CHECK-NEXT:    ord $r3 = $r3, $r6
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <32 x i8> @llvm.usub.sat.v32i8(<32 x i8> %1, <32 x i8> %0)
  ret <32 x i8> %3
}

declare <32 x i8> @llvm.usub.sat.v32i8(<32 x i8>, <32 x i8>) #2

define <4 x i16> @sbfhq(<4 x i16> %0, <4 x i16> %1) {
; CHECK-LABEL: sbfhq:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfhq $r0 = $r0, $r1
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = sub <4 x i16> %1, %0
  ret <4 x i16> %3
}

define <4 x i16> @sbfhq_s(<4 x i16> %0, <4 x i16> %1) {
; CHECK-LABEL: sbfhq_s:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfshq $r0 = $r0, $r1
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <4 x i16> @llvm.ssub.sat.v4i16(<4 x i16> %1, <4 x i16> %0)
  ret <4 x i16> %3
}

declare <4 x i16> @llvm.ssub.sat.v4i16(<4 x i16>, <4 x i16>) #2

define <4 x i16> @sbfhq_us(<4 x i16> %0, <4 x i16> %1) {
; CHECK-LABEL: sbfhq_us:
; CHECK:       # %bb.0:
; CHECK-NEXT:    maxuhq $r1 = $r1, $r0
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfhq $r0 = $r0, $r1
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <4 x i16> @llvm.usub.sat.v4i16(<4 x i16> %1, <4 x i16> %0)
  ret <4 x i16> %3
}

declare <4 x i16> @llvm.usub.sat.v4i16(<4 x i16>, <4 x i16>) #2

define <8 x i16> @sbfho(<8 x i16> %0, <8 x i16> %1) {
; CHECK-LABEL: sbfho:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfhq $r0 = $r0, $r2
; CHECK-NEXT:    sbfhq $r1 = $r1, $r3
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = sub <8 x i16> %1, %0
  ret <8 x i16> %3
}

define <8 x i16> @sbfho_s(<8 x i16> %0, <8 x i16> %1) {
; CHECK-LABEL: sbfho_s:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfshq $r0 = $r0, $r2
; CHECK-NEXT:    sbfshq $r1 = $r1, $r3
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <8 x i16> @llvm.ssub.sat.v8i16(<8 x i16> %1, <8 x i16> %0)
  ret <8 x i16> %3
}

declare <8 x i16> @llvm.ssub.sat.v8i16(<8 x i16>, <8 x i16>) #2

define <8 x i16> @sbfho_us(<8 x i16> %0, <8 x i16> %1) {
; CHECK-LABEL: sbfho_us:
; CHECK:       # %bb.0:
; CHECK-NEXT:    maxuhq $r2 = $r2, $r0
; CHECK-NEXT:    maxuhq $r3 = $r3, $r1
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfhq $r0 = $r0, $r2
; CHECK-NEXT:    sbfhq $r1 = $r1, $r3
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <8 x i16> @llvm.usub.sat.v8i16(<8 x i16> %1, <8 x i16> %0)
  ret <8 x i16> %3
}

declare <8 x i16> @llvm.usub.sat.v8i16(<8 x i16>, <8 x i16>) #2

define <16 x i16> @sbfhx(<16 x i16> %0, <16 x i16> %1) {
; CHECK-LABEL: sbfhx:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfhq $r0 = $r0, $r4
; CHECK-NEXT:    sbfhq $r1 = $r1, $r5
; CHECK-NEXT:    sbfhq $r2 = $r2, $r6
; CHECK-NEXT:    sbfhq $r3 = $r3, $r7
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = sub <16 x i16> %1, %0
  ret <16 x i16> %3
}

define <16 x i16> @sbfhx_s(<16 x i16> %0, <16 x i16> %1) {
; CHECK-LABEL: sbfhx_s:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfshq $r0 = $r0, $r4
; CHECK-NEXT:    sbfshq $r1 = $r1, $r5
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfshq $r2 = $r2, $r6
; CHECK-NEXT:    sbfshq $r3 = $r3, $r7
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <16 x i16> @llvm.ssub.sat.v16i16(<16 x i16> %1, <16 x i16> %0)
  ret <16 x i16> %3
}

declare <16 x i16> @llvm.ssub.sat.v16i16(<16 x i16>, <16 x i16>) #2

define <16 x i16> @sbfhx_us(<16 x i16> %0, <16 x i16> %1) {
; CHECK-LABEL: sbfhx_us:
; CHECK:       # %bb.0:
; CHECK-NEXT:    maxuhq $r4 = $r4, $r0
; CHECK-NEXT:    maxuhq $r5 = $r5, $r1
; CHECK-NEXT:    maxuhq $r6 = $r6, $r2
; CHECK-NEXT:    maxuhq $r7 = $r7, $r3
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfhq $r0 = $r0, $r4
; CHECK-NEXT:    sbfhq $r1 = $r1, $r5
; CHECK-NEXT:    sbfhq $r2 = $r2, $r6
; CHECK-NEXT:    sbfhq $r3 = $r3, $r7
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <16 x i16> @llvm.usub.sat.v16i16(<16 x i16> %1, <16 x i16> %0)
  ret <16 x i16> %3
}

declare <16 x i16> @llvm.usub.sat.v16i16(<16 x i16>, <16 x i16>) #2

define i32 @sbfw(i32 %0, i32 %1) {
; CHECK-LABEL: sbfw:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfw $r0 = $r0, $r1
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = sub i32 %1, %0
  ret i32 %3
}

define i32 @sbfw_s(i32 %0, i32 %1) {
; CHECK-LABEL: sbfw_s:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfsw $r0 = $r0, $r1
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call i32 @llvm.ssub.sat.i32(i32 %1, i32 %0)
  ret i32 %3
}

declare i32 @llvm.ssub.sat.i32(i32, i32) #2

define i32 @sbfw_us(i32 %0, i32 %1) {
; CHECK-LABEL: sbfw_us:
; CHECK:       # %bb.0:
; CHECK-NEXT:    maxuw $r1 = $r1, $r0
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfw $r0 = $r0, $r1
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call i32 @llvm.usub.sat.i32(i32 %1, i32 %0)
  ret i32 %3
}

declare i32 @llvm.usub.sat.i32(i32, i32) #2

define <2 x i32> @sbfwp(<2 x i32> %0, <2 x i32> %1) {
; CHECK-LABEL: sbfwp:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfwp $r0 = $r0, $r1
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = sub <2 x i32> %1, %0
  ret <2 x i32> %3
}

define <2 x i32> @sbfwp_s(<2 x i32> %0, <2 x i32> %1) {
; CHECK-LABEL: sbfwp_s:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfswp $r0 = $r0, $r1
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <2 x i32> @llvm.ssub.sat.v2i32(<2 x i32> %1, <2 x i32> %0)
  ret <2 x i32> %3
}

declare <2 x i32> @llvm.ssub.sat.v2i32(<2 x i32>, <2 x i32>) #2

define <2 x i32> @sbfwp_us(<2 x i32> %0, <2 x i32> %1) {
; CHECK-LABEL: sbfwp_us:
; CHECK:       # %bb.0:
; CHECK-NEXT:    maxuwp $r1 = $r1, $r0
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfwp $r0 = $r0, $r1
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <2 x i32> @llvm.usub.sat.v2i32(<2 x i32> %1, <2 x i32> %0)
  ret <2 x i32> %3
}

declare <2 x i32> @llvm.usub.sat.v2i32(<2 x i32>, <2 x i32>) #2

define <4 x i32> @sbfwq(<4 x i32> %0, <4 x i32> %1) {
; CHECK-LABEL: sbfwq:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfwp $r0 = $r0, $r2
; CHECK-NEXT:    sbfwp $r1 = $r1, $r3
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = sub <4 x i32> %1, %0
  ret <4 x i32> %3
}

define <4 x i32> @sbfwq_s(<4 x i32> %0, <4 x i32> %1) {
; CHECK-LABEL: sbfwq_s:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfswp $r1 = $r1, $r3
; CHECK-NEXT:    sbfswp $r0 = $r0, $r2
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <4 x i32> @llvm.ssub.sat.v4i32(<4 x i32> %1, <4 x i32> %0)
  ret <4 x i32> %3
}

declare <4 x i32> @llvm.ssub.sat.v4i32(<4 x i32>, <4 x i32>) #2

define <4 x i32> @sbfwq_us(<4 x i32> %0, <4 x i32> %1) {
; CHECK-LABEL: sbfwq_us:
; CHECK:       # %bb.0:
; CHECK-NEXT:    maxuwp $r3 = $r3, $r1
; CHECK-NEXT:    maxuwp $r2 = $r2, $r0
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfwp $r1 = $r1, $r3
; CHECK-NEXT:    sbfwp $r0 = $r0, $r2
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <4 x i32> @llvm.usub.sat.v4i32(<4 x i32> %1, <4 x i32> %0)
  ret <4 x i32> %3
}

declare <4 x i32> @llvm.usub.sat.v4i32(<4 x i32>, <4 x i32>) #2

define <8 x i32> @sbfwo(<8 x i32> %0, <8 x i32> %1) {
; CHECK-LABEL: sbfwo:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfwp $r0 = $r0, $r4
; CHECK-NEXT:    sbfwp $r1 = $r1, $r5
; CHECK-NEXT:    sbfwp $r2 = $r2, $r6
; CHECK-NEXT:    sbfwp $r3 = $r3, $r7
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = sub <8 x i32> %1, %0
  ret <8 x i32> %3
}

define <8 x i32> @sbfwo_s(<8 x i32> %0, <8 x i32> %1) {
; CHECK-LABEL: sbfwo_s:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfswp $r3 = $r3, $r7
; CHECK-NEXT:    sbfswp $r2 = $r2, $r6
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfswp $r1 = $r1, $r5
; CHECK-NEXT:    sbfswp $r0 = $r0, $r4
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <8 x i32> @llvm.ssub.sat.v8i32(<8 x i32> %1, <8 x i32> %0)
  ret <8 x i32> %3
}

declare <8 x i32> @llvm.ssub.sat.v8i32(<8 x i32>, <8 x i32>) #2

define <8 x i32> @sbfwo_us(<8 x i32> %0, <8 x i32> %1) {
; CHECK-LABEL: sbfwo_us:
; CHECK:       # %bb.0:
; CHECK-NEXT:    maxuwp $r7 = $r7, $r3
; CHECK-NEXT:    maxuwp $r6 = $r6, $r2
; CHECK-NEXT:    maxuwp $r5 = $r5, $r1
; CHECK-NEXT:    maxuwp $r4 = $r4, $r0
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfwp $r3 = $r3, $r7
; CHECK-NEXT:    sbfwp $r2 = $r2, $r6
; CHECK-NEXT:    sbfwp $r1 = $r1, $r5
; CHECK-NEXT:    sbfwp $r0 = $r0, $r4
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <8 x i32> @llvm.usub.sat.v8i32(<8 x i32> %1, <8 x i32> %0)
  ret <8 x i32> %3
}

declare <8 x i32> @llvm.usub.sat.v8i32(<8 x i32>, <8 x i32>) #2

define i64 @sbfd(i64 %0, i64 %1) {
; CHECK-LABEL: sbfd:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfd $r0 = $r0, $r1
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = sub i64 %1, %0
  ret i64 %3
}

define i64 @sbfd_s(i64 %0, i64 %1) {
; CHECK-LABEL: sbfd_s:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfsd $r0 = $r0, $r1
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call i64 @llvm.ssub.sat.i64(i64 %1, i64 %0)
  ret i64 %3
}

declare i64 @llvm.ssub.sat.i64(i64, i64) #2

define i64 @sbfd_us(i64 %0, i64 %1) {
; CHECK-LABEL: sbfd_us:
; CHECK:       # %bb.0:
; CHECK-NEXT:    maxud $r1 = $r1, $r0
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfd $r0 = $r0, $r1
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call i64 @llvm.usub.sat.i64(i64 %1, i64 %0)
  ret i64 %3
}

declare i64 @llvm.usub.sat.i64(i64, i64) #2

define <2 x i64> @sbfdp(<2 x i64> %0, <2 x i64> %1) {
; CHECK-LABEL: sbfdp:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfd $r1 = $r1, $r3
; CHECK-NEXT:    sbfd $r0 = $r0, $r2
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = sub <2 x i64> %1, %0
  ret <2 x i64> %3
}

define <2 x i64> @sbfdp_s(<2 x i64> %0, <2 x i64> %1) {
; CHECK-LABEL: sbfdp_s:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfsd $r1 = $r1, $r3
; CHECK-NEXT:    sbfsd $r0 = $r0, $r2
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <2 x i64> @llvm.ssub.sat.v2i64(<2 x i64> %1, <2 x i64> %0)
  ret <2 x i64> %3
}

declare <2 x i64> @llvm.ssub.sat.v2i64(<2 x i64>, <2 x i64>) #2

define <2 x i64> @sbfdp_us(<2 x i64> %0, <2 x i64> %1) {
; CHECK-LABEL: sbfdp_us:
; CHECK:       # %bb.0:
; CHECK-NEXT:    maxud $r3 = $r3, $r1
; CHECK-NEXT:    maxud $r2 = $r2, $r0
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfd $r1 = $r1, $r3
; CHECK-NEXT:    sbfd $r0 = $r0, $r2
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <2 x i64> @llvm.usub.sat.v2i64(<2 x i64> %1, <2 x i64> %0)
  ret <2 x i64> %3
}

declare <2 x i64> @llvm.usub.sat.v2i64(<2 x i64>, <2 x i64>) #2

define <4 x i64> @sbfdq(<4 x i64> %0, <4 x i64> %1) {
; CHECK-LABEL: sbfdq:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfd $r1 = $r1, $r5
; CHECK-NEXT:    sbfd $r0 = $r0, $r4
; CHECK-NEXT:    sbfd $r2 = $r2, $r6
; CHECK-NEXT:    sbfd $r3 = $r3, $r7
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = sub <4 x i64> %1, %0
  ret <4 x i64> %3
}

define <4 x i64> @sbfdq_s(<4 x i64> %0, <4 x i64> %1) {
; CHECK-LABEL: sbfdq_s:
; CHECK:       # %bb.0:
; CHECK-NEXT:    sbfsd $r1 = $r1, $r5
; CHECK-NEXT:    sbfsd $r0 = $r0, $r4
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfsd $r2 = $r2, $r6
; CHECK-NEXT:    sbfsd $r3 = $r3, $r7
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <4 x i64> @llvm.ssub.sat.v4i64(<4 x i64> %1, <4 x i64> %0)
  ret <4 x i64> %3
}

declare <4 x i64> @llvm.ssub.sat.v4i64(<4 x i64>, <4 x i64>) #2

define <4 x i64> @sbfdq_us(<4 x i64> %0, <4 x i64> %1) {
; CHECK-LABEL: sbfdq_us:
; CHECK:       # %bb.0:
; CHECK-NEXT:    maxud $r5 = $r5, $r1
; CHECK-NEXT:    maxud $r4 = $r4, $r0
; CHECK-NEXT:    maxud $r6 = $r6, $r2
; CHECK-NEXT:    maxud $r7 = $r7, $r3
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sbfd $r1 = $r1, $r5
; CHECK-NEXT:    sbfd $r0 = $r0, $r4
; CHECK-NEXT:    sbfd $r2 = $r2, $r6
; CHECK-NEXT:    sbfd $r3 = $r3, $r7
; CHECK-NEXT:    ret
; CHECK-NEXT:    ;;
  %3 = tail call <4 x i64> @llvm.usub.sat.v4i64(<4 x i64> %1, <4 x i64> %0)
  ret <4 x i64> %3
}

declare <4 x i64> @llvm.usub.sat.v4i64(<4 x i64>, <4 x i64>) #2
