; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -O0 < %s | FileCheck %s
target triple = "kvx-kalray-cos"

define void @zeroinit256() {
; CHECK-LABEL: zeroinit256:
; CHECK:       # %bb.0:
; CHECK-NEXT:    addd $r12 = $r12, -64
; CHECK-NEXT:    ;;
; CHECK-NEXT:    .cfi_def_cfa_offset 64
; CHECK-NEXT:    # implicit-def: $a0
; CHECK-NEXT:    sv 0[$r12] = $a0
; CHECK-NEXT:    ;;
; CHECK-NEXT:  .LBB0_1: # =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    lv $a0 = 0[$r12]
; CHECK-NEXT:    ;;
; CHECK-NEXT:    copyv $a1 = $a48
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 0[$r12] = $a1
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 32[$r12] = $a0
; CHECK-NEXT:    ;;
; CHECK-NEXT:    goto .LBB0_1
; CHECK-NEXT:    ;;
  br label %1

1:
  %2 = phi <256 x i1> [ %3, %1 ], [ undef, %0 ]
  %3 = select i1 undef, <256 x i1> %2, <256 x i1> zeroinitializer
  br label %1
}

define void @zeroinit512() {
; CHECK-LABEL: zeroinit512:
; CHECK:       # %bb.0:
; CHECK-NEXT:    addd $r12 = $r12, -256
; CHECK-NEXT:    ;;
; CHECK-NEXT:    .cfi_def_cfa_offset 256
; CHECK-NEXT:    copyd $r32 = $r12
; CHECK-NEXT:    ;;
; CHECK-NEXT:    .cfi_def_cfa_register 32
; CHECK-NEXT:    addd $r12 = $r12, 32
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r12 = $r12, -64
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sd 0[$r12] = $r14
; CHECK-NEXT:    ;;
; CHECK-NEXT:    .cfi_escape 0x10, 0x0e, 0x02, 0x7c, 0x00
; CHECK-NEXT:    copyd $r14 = $r32
; CHECK-NEXT:    ;;
; CHECK-NEXT:    .cfi_def_cfa_register 14
; CHECK-NEXT:    # implicit-def: $w0
; CHECK-NEXT:    sv 64[$r12] = $a0
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 96[$r12] = $a1
; CHECK-NEXT:    ;;
; CHECK-NEXT:  .LBB1_1: # =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    lv $a0 = 64[$r12]
; CHECK-NEXT:    ;;
; CHECK-NEXT:    lv $a1 = 96[$r12]
; CHECK-NEXT:    ;;
; CHECK-NEXT:    copyv $a2 = $a50
; CHECK-NEXT:    ;;
; CHECK-NEXT:    copyv $a3 = $a51
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 64[$r12] = $a2
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 96[$r12] = $a3
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 128[$r12] = $a0
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 160[$r12] = $a1
; CHECK-NEXT:    ;;
; CHECK-NEXT:    goto .LBB1_1
; CHECK-NEXT:    ;;
  br label %1

1:
  %2 = phi <512 x i1> [ %3, %1 ], [ undef, %0 ]
  %3 = select i1 undef, <512 x i1> %2, <512 x i1> zeroinitializer
  br label %1
}

define void @zeroinit1024() {
; CHECK-LABEL: zeroinit1024:
; CHECK:       # %bb.0:
; CHECK-NEXT:    addd $r12 = $r12, -512
; CHECK-NEXT:    ;;
; CHECK-NEXT:    .cfi_def_cfa_offset 512
; CHECK-NEXT:    copyd $r32 = $r12
; CHECK-NEXT:    ;;
; CHECK-NEXT:    .cfi_def_cfa_register 32
; CHECK-NEXT:    addd $r12 = $r12, 96
; CHECK-NEXT:    ;;
; CHECK-NEXT:    andd $r12 = $r12, -128
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sd 0[$r12] = $r14
; CHECK-NEXT:    ;;
; CHECK-NEXT:    .cfi_escape 0x10, 0x0e, 0x02, 0x7c, 0x00
; CHECK-NEXT:    copyd $r14 = $r32
; CHECK-NEXT:    ;;
; CHECK-NEXT:    .cfi_def_cfa_register 14
; CHECK-NEXT:    # implicit-def: $x0
; CHECK-NEXT:    sv 128[$r12] = $a0
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 160[$r12] = $a1
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 192[$r12] = $a2
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 224[$r12] = $a3
; CHECK-NEXT:    ;;
; CHECK-NEXT:  .LBB2_1: # =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    lv $a0 = 128[$r12]
; CHECK-NEXT:    ;;
; CHECK-NEXT:    lv $a1 = 160[$r12]
; CHECK-NEXT:    ;;
; CHECK-NEXT:    lv $a2 = 192[$r12]
; CHECK-NEXT:    ;;
; CHECK-NEXT:    lv $a3 = 224[$r12]
; CHECK-NEXT:    ;;
; CHECK-NEXT:    copyv $a4 = $a48
; CHECK-NEXT:    ;;
; CHECK-NEXT:    copyv $a5 = $a49
; CHECK-NEXT:    ;;
; CHECK-NEXT:    copyv $a6 = $a50
; CHECK-NEXT:    ;;
; CHECK-NEXT:    copyv $a7 = $a51
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 128[$r12] = $a4
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 160[$r12] = $a5
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 192[$r12] = $a6
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 224[$r12] = $a7
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 256[$r12] = $a0
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 288[$r12] = $a1
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 320[$r12] = $a2
; CHECK-NEXT:    ;;
; CHECK-NEXT:    sv 352[$r12] = $a3
; CHECK-NEXT:    ;;
; CHECK-NEXT:    goto .LBB2_1
; CHECK-NEXT:    ;;
  br label %1

1:
  %2 = phi <1024 x i1> [ %3, %1 ], [ undef, %0 ]
  %3 = select i1 undef, <1024 x i1> %2, <1024 x i1> zeroinitializer
  br label %1
}
