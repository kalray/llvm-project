; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -mcpu=kv3-1 -o - %s | FileCheck %s --check-prefix=CV1
; RUN: llc -mcpu=kv3-2 -o - %s | FileCheck %s --check-prefix=CV2
; RUN: clang -O2 -c -o /dev/null %s
; RUN: clang -O2 -march=kv3-2 -c -o /dev/null %s

target triple = "kvx-kalray-cos"

define void @zeroinit256(<256 x i1> *%p) {
; CV1-LABEL: zeroinit256:
; CV1:       # %bb.0:
; CV1-NEXT:    sv 0[$r0] = $a48
; CV1-NEXT:    ret
; CV1-NEXT:    ;;
;
; CV2-LABEL: zeroinit256:
; CV2:       # %bb.0:
; CV2-NEXT:    xsplatdo $a0 = 0
; CV2-NEXT:    ;;
; CV2-NEXT:    xso 0[$r0] = $a0
; CV2-NEXT:    ret
; CV2-NEXT:    ;;
  store <256 x i1> zeroinitializer, <256 x i1>* %p
  ret void
}

define void @zeroinit512(<512 x i1> *%p) {
; CV1-LABEL: zeroinit512:
; CV1:       # %bb.0:
; CV1-NEXT:    copyv $a1 = $a48
; CV1-NEXT:    ;;
; CV1-NEXT:    sv 32[$r0] = $a1
; CV1-NEXT:    ;;
; CV1-NEXT:    copyv $a0 = $a48
; CV1-NEXT:    ;;
; CV1-NEXT:    sv 0[$r0] = $a0
; CV1-NEXT:    ret
; CV1-NEXT:    ;;
;
; CV2-LABEL: zeroinit512:
; CV2:       # %bb.0:
; CV2-NEXT:    xsplatdo $a1 = 0
; CV2-NEXT:    ;;
; CV2-NEXT:    xsplatdo $a0 = 0
; CV2-NEXT:    ;;
; CV2-NEXT:    xso 32[$r0] = $a1
; CV2-NEXT:    ;;
; CV2-NEXT:    xso 0[$r0] = $a0
; CV2-NEXT:    ret
; CV2-NEXT:    ;;
  store <512 x i1> zeroinitializer, <512 x i1>* %p
  ret void
}

define void @zeroinit1024(<1024 x i1> *%p) {
; CV1-LABEL: zeroinit1024:
; CV1:       # %bb.0:
; CV1-NEXT:    copyv $a3 = $a48
; CV1-NEXT:    ;;
; CV1-NEXT:    sv 96[$r0] = $a3
; CV1-NEXT:    ;;
; CV1-NEXT:    copyv $a2 = $a48
; CV1-NEXT:    ;;
; CV1-NEXT:    sv 64[$r0] = $a2
; CV1-NEXT:    ;;
; CV1-NEXT:    copyv $a1 = $a48
; CV1-NEXT:    ;;
; CV1-NEXT:    sv 32[$r0] = $a1
; CV1-NEXT:    ;;
; CV1-NEXT:    copyv $a0 = $a48
; CV1-NEXT:    ;;
; CV1-NEXT:    sv 0[$r0] = $a0
; CV1-NEXT:    ret
; CV1-NEXT:    ;;
;
; CV2-LABEL: zeroinit1024:
; CV2:       # %bb.0:
; CV2-NEXT:    xsplatdo $a0 = 0
; CV2-NEXT:    ;;
; CV2-NEXT:    xsplatov $a0a1a2a3 = $a0
; CV2-NEXT:    ;;
; CV2-NEXT:    xso 96[$r0] = $a3
; CV2-NEXT:    ;;
; CV2-NEXT:    xso 64[$r0] = $a2
; CV2-NEXT:    ;;
; CV2-NEXT:    xso 32[$r0] = $a1
; CV2-NEXT:    ;;
; CV2-NEXT:    xso 0[$r0] = $a0
; CV2-NEXT:    ret
; CV2-NEXT:    ;;
  store <1024 x i1> zeroinitializer, <1024 x i1>* %p
  ret void
}
