; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -O3 -o - %s | FileCheck %s -check-prefixes=WITH
; RUN: clang -O3 -c -o /dev/null %s
; RUN: llc -O3 -disable-kvx-cycles -o - %s | FileCheck %s -check-prefixes=WITHOUT
; RUN: clang -O3 -mllvm -disable-kvx-cycles -c -o /dev/null %s

target triple = "kvx-kalray-cos"

define i32 @add(i32 %0, i32 %1) {
; WITH-LABEL: add:
; WITH:       # %bb.0:
; WITH-NEXT:    addw $r0 = $r1, $r0
; WITH-NEXT:    ret
; WITH-NEXT:    ;; # (end cycle 0)
;
; WITHOUT-LABEL: add:
; WITHOUT:       # %bb.0:
; WITHOUT-NEXT:    addw $r0 = $r1, $r0
; WITHOUT-NEXT:    ret
; WITHOUT-NEXT:    ;;
  %3 = add nsw i32 %1, %0
  ret i32 %3
}

