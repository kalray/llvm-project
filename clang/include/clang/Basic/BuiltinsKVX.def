//===-- BuiltinsKVX.def - KVX Builtin function database ----------*- C++ -*-==//
//
//                     The LLVM Compiler Infrastructure
//
// This file is distributed under the University of Illinois Open Source
// License. See LICENSE.TXT for details.
//
//===----------------------------------------------------------------------===//
//
// This file defines the KVX-specific builtin functions database. Users of
// this file must define the BUILTIN macro to make use of this information.
//
//===----------------------------------------------------------------------===//

// The format of this database matches clang/Basic/Builtins.def.

#ifndef BUILTIN
#   define BUILTIN(ID, TYPES, ATTRS)
#endif

#ifndef NARY_BUILTIN
#   define NARY_BUILTIN(ID, TYPES, MODE, NARGS) BUILTIN(__builtin_kvx_ ## ID, TYPES, MODE)
#endif
// TODO: Replace as many BUILTIN and NARY builtin uses with KVX_BUILTIN

// KVX_BUILTIN: This macro is expanded at code selection. Its arguments are:
//  ** ID: The kvx builtin id, it will be prefixed with __builtin_kvx_
//  ** TYPES: The usual BUILTIN TYPES, describing (output value)(input values)
//  ** MODE: The usual BUILTIN MODE, describing the properties of the builtin
//  ** KVXMODS: String containing the name of the intrinsic modifier as the manual,
//              space separated, and in order they should be checked.
//  ** CPUS: String containing all cpus for which this intrinsic can be compiled.

// At expansion it is coded that:
// - If CPUS string does not contain the current cpu, it warns that this intrinsic
//   can't be used for the current cpu.

// - If KVXMODS string is empty it will just call the NARY function.
//   Else it will call:
//     KVXemit(NARGS, *this(CodeGenFunction), E(CallExpr), Intrinsic::kvx_##ID, KVXMODS);
//   which will parse the KVX modifiers and add them to the instruction accordingly.

#ifndef KVX_BUILTIN
#    define KVX_BUILTIN(ID, TYPES, MODE, NARGS, CPUS, ...) BUILTIN(__builtin_kvx_ ## ID, TYPES, MODE)
#endif

//===----------------------------------------------------------------------===//
// BCU
//===----------------------------------------------------------------------===//
KVX_BUILTIN(await, "v", "n", 0, "", )
KVX_BUILTIN(barrier, "v", "n", 0, "", )
KVX_BUILTIN(errop, "v", "r", 0, "", )
BUILTIN(__builtin_kvx_get, "OiUIc", "n")
BUILTIN(__builtin_kvx_set, "vUIcOi", "n")
KVX_BUILTIN(sleep, "v", "n", 0, "", )
KVX_BUILTIN(stop, "v", "n", 0, "", )
BUILTIN(__builtin_kvx_syncgroup, "vUOi", "n")
KVX_BUILTIN(tlbdinval, "v", "n", 0, "", )
KVX_BUILTIN(tlbiinval, "v", "n", 0, "", )
KVX_BUILTIN(tlbprobe, "v", "n", 0, "", )
KVX_BUILTIN(tlbread, "v", "n", 0, "", )
KVX_BUILTIN(tlbwrite, "v", "", 0, "", )
BUILTIN(__builtin_kvx_waitit, "UiUOi", "n")
BUILTIN(__builtin_kvx_wfxl, "vUIcUOi", "n")
BUILTIN(__builtin_kvx_wfxm, "vUIcUOi", "n")

//===----------------------------------------------------------------------===//
// LSU
//===----------------------------------------------------------------------===//

BUILTIN(__builtin_kvx_acswapd, "Oiv*OiOi.", "n")
BUILTIN(__builtin_kvx_acswapw, "iv*ii.", "n")
KVX_BUILTIN(acswapq, "V2Oiv*V2OiV2OicC*", "n", 4, "kv3-2", KVX_BOOLCAS, KVX_COHERENCY)
BUILTIN(__builtin_kvx_aladdd, "UOiv*UOi", "n")
BUILTIN(__builtin_kvx_aladdw, "Uiv*Ui", "n")
BUILTIN(__builtin_kvx_alclrd, "Oiv*", "n")
BUILTIN(__builtin_kvx_alclrw, "iv*", "n")
BUILTIN(__builtin_kvx_dinvall, "vvC*", "n")
KVX_BUILTIN(d1inval, "v", "n", 0, "", )
BUILTIN(__builtin_kvx_dtouchl, "vvC*", "n")
BUILTIN(__builtin_kvx_dzerol, "vvC*", "n") // deprecated
KVX_BUILTIN(fence, "v", "n", 0, "", )
BUILTIN(__builtin_kvx_i1invals, "vvC*", "n")
KVX_BUILTIN(i1inval, "v", "n", 0, "", )
BUILTIN(__builtin_kvx_lbs, "OivC*cC*.", "n")
BUILTIN(__builtin_kvx_lbz, "OivC*cC*.", "n")
BUILTIN(__builtin_kvx_lbo, "V8cvC*cC*.", "n")
BUILTIN(__builtin_kvx_ldf, "dvC*cC*.", "n")
BUILTIN(__builtin_kvx_lfwp, "V2fvC*cC*.", "n")
BUILTIN(__builtin_kvx_lhq, "V4svC*cC*.", "n")
BUILTIN(__builtin_kvx_ld, "OivC*cC*.", "n")
BUILTIN(__builtin_kvx_lwp, "V2ivC*cC*.", "n")
BUILTIN(__builtin_kvx_lhs, "OivC*cC*.", "n")
BUILTIN(__builtin_kvx_lhz, "OivC*cC*.", "n")
BUILTIN(__builtin_kvx_lbv, "V32cvC*cC*.", "n")
BUILTIN(__builtin_kvx_ldq, "V4OivC*cC*.", "n")
BUILTIN(__builtin_kvx_lfdq, "V4dvC*cC*.", "n")
BUILTIN(__builtin_kvx_lfwo, "V8fvC*cC*.", "n")
BUILTIN(__builtin_kvx_lhx, "V16svC*cC*.", "n")
BUILTIN(__builtin_kvx_lwo, "V8ivC*cC*.", "n")
BUILTIN(__builtin_kvx_lbx, "V16cvC*cC*.", "n")
BUILTIN(__builtin_kvx_ldp, "V2OivC*cC*.", "n")
BUILTIN(__builtin_kvx_lfdp, "V2dvC*cC*.", "n")
BUILTIN(__builtin_kvx_lfwq, "V4fvC*cC*.", "n")
BUILTIN(__builtin_kvx_lho, "V8svC*cC*.", "n")
BUILTIN(__builtin_kvx_lwq, "V4ivC*cC*.", "n")
BUILTIN(__builtin_kvx_lwf, "fvC*cC*.", "n")
BUILTIN(__builtin_kvx_lws, "OivC*cC*.", "n")
BUILTIN(__builtin_kvx_lwz, "OivC*cC*.", "n")

//===----------------------------------------------------------------------===//
// FPU
//===----------------------------------------------------------------------===//

BUILTIN(__builtin_kvx_selectdp, "V2OiV2OiV2OiV2OicC*", "n")
BUILTIN(__builtin_kvx_selectdq, "V4OiV4OiV4OiV4OicC*", "n")
BUILTIN(__builtin_kvx_selectho, "V8sV8sV8sV8scC*", "n")
BUILTIN(__builtin_kvx_selecthq, "V4sV4sV4sV4scC*", "n")
BUILTIN(__builtin_kvx_selecthx, "V16sV16sV16sV16scC*", "n")
BUILTIN(__builtin_kvx_selectwo, "V8iV8iV8iV8icC*", "n")
BUILTIN(__builtin_kvx_selectwp, "V2iV2iV2iV2icC*", "n")
BUILTIN(__builtin_kvx_selectwq, "V4iV4iV4iV4icC*", "n")
BUILTIN(__builtin_kvx_fabsd, "dd", "n")
BUILTIN(__builtin_kvx_fabsdp, "V2dV2d", "n")
BUILTIN(__builtin_kvx_fabsdq, "V4dV4d", "n")
BUILTIN(__builtin_kvx_fabsw, "ff", "n")
BUILTIN(__builtin_kvx_fabswo, "V8fV8f", "n")
BUILTIN(__builtin_kvx_fabswp, "V2fV2f", "n")
BUILTIN(__builtin_kvx_fabswq, "V4fV4f", "n")
BUILTIN(__builtin_kvx_faddd, "dddcC*", "n")
BUILTIN(__builtin_kvx_fadddp, "V2dV2dV2dcC*", "n")
BUILTIN(__builtin_kvx_fadddq, "V4dV4dV4dcC*", "n")
BUILTIN(__builtin_kvx_faddw, "fffcC*", "n")
BUILTIN(__builtin_kvx_faddwo, "V8fV8fV8fcC*", "n")
BUILTIN(__builtin_kvx_faddwp, "V2fV2fV2fcC*", "n")
BUILTIN(__builtin_kvx_faddwq, "V4fV4fV4fcC*", "n")
BUILTIN(__builtin_kvx_fcdivd, "dddcC*", "n")
BUILTIN(__builtin_kvx_fcdivw, "fffcC*", "n")
BUILTIN(__builtin_kvx_fconjwc, "V2fV2f", "n")
BUILTIN(__builtin_kvx_fconjwcp, "V4fV4f", "n")
BUILTIN(__builtin_kvx_fconjwcq, "V8fV8f", "n")
BUILTIN(__builtin_kvx_fconjdc, "V2dV2d", "n")
BUILTIN(__builtin_kvx_fconjdcp, "V4dV4d", "n")
BUILTIN(__builtin_kvx_ffmah, "xxxxcC*", "n")
BUILTIN(__builtin_kvx_ffmahq, "V4xV4xV4xV4xcC*", "n")
BUILTIN(__builtin_kvx_ffmaho, "V8xV8xV8xV8xcC*", "n")
BUILTIN(__builtin_kvx_ffmahx, "V16xV16xV16xV16xcC*", "n")
BUILTIN(__builtin_kvx_ffmad, "ddddcC*", "n")
BUILTIN(__builtin_kvx_ffmadp, "V2dV2dV2dV2dcC*", "n")
BUILTIN(__builtin_kvx_ffmadc, "V2dV2dV2dV2dcC*", "n")
BUILTIN(__builtin_kvx_ffmadq, "V4dV4dV4dV4dcC*", "n")
BUILTIN(__builtin_kvx_ffmadcp, "V4dV4dV4dV4dcC*", "n")
BUILTIN(__builtin_kvx_ffmaxwd, "dffdcC*", "n")
BUILTIN(__builtin_kvx_ffmaw, "ffffcC*", "n")
BUILTIN(__builtin_kvx_ffmawo, "V8fV8fV8fV8fcC*", "n")
BUILTIN(__builtin_kvx_ffmawcq, "V8fV8fV8fV8fcC*", "n")
BUILTIN(__builtin_kvx_ffmawp, "V2fV2fV2fV2fcC*", "n")
BUILTIN(__builtin_kvx_ffmawc, "V2fV2fV2fV2fcC*", "n")
BUILTIN(__builtin_kvx_ffmawq, "V4fV4fV4fV4fcC*", "n")
BUILTIN(__builtin_kvx_ffmawcp, "V4fV4fV4fV4fcC*", "n")
BUILTIN(__builtin_kvx_ffmsd, "ddddcC*", "n")
BUILTIN(__builtin_kvx_ffmsdp, "V2dV2dV2dV2dcC*", "n")
BUILTIN(__builtin_kvx_ffmsdc, "V2dV2dV2dV2dcC*", "n")
BUILTIN(__builtin_kvx_ffmsdq, "V4dV4dV4dV4dcC*", "n")
BUILTIN(__builtin_kvx_ffmsdcp, "V4dV4dV4dV4dcC*", "n")
BUILTIN(__builtin_kvx_ffmsxwd, "dffdcC*", "n")
BUILTIN(__builtin_kvx_ffmsw, "ffffcC*", "n")
BUILTIN(__builtin_kvx_ffmswo, "V8fV8fV8fV8fcC*", "n")
BUILTIN(__builtin_kvx_ffmswcq, "V8fV8fV8fV8fcC*", "n")
BUILTIN(__builtin_kvx_ffmswp, "V2fV2fV2fV2fcC*", "n")
BUILTIN(__builtin_kvx_ffmswc, "V2fV2fV2fV2fcC*", "n")
BUILTIN(__builtin_kvx_ffmswq, "V4fV4fV4fV4fcC*", "n")
BUILTIN(__builtin_kvx_ffmswcp, "V4fV4fV4fV4fcC*", "n")
BUILTIN(__builtin_kvx_fixedd, "OidUOicC*", "n")
BUILTIN(__builtin_kvx_fixeddp, "V2OiV2dUOicC*", "n")
BUILTIN(__builtin_kvx_fixeddq, "V4OiV4dUOicC*", "n")
BUILTIN(__builtin_kvx_fixedudp, "V2UOiV2dUOicC*", "n")
BUILTIN(__builtin_kvx_fixedudq, "V4UOiV4dUOicC*", "n")
BUILTIN(__builtin_kvx_fixedud, "UOidUOicC*", "n")
BUILTIN(__builtin_kvx_fixeduwo, "V8UiV8fUOicC*", "n")
BUILTIN(__builtin_kvx_fixeduwp, "V2UiV2fUOicC*", "n")
BUILTIN(__builtin_kvx_fixeduwq, "V4UiV4fUOicC*", "n")
BUILTIN(__builtin_kvx_fixeduw, "UifUOicC*", "n")
BUILTIN(__builtin_kvx_fixedw, "ifUOicC*", "n")
BUILTIN(__builtin_kvx_fixedwo, "V8iV8fUOicC*", "n")
BUILTIN(__builtin_kvx_fixedwp, "V2iV2fUOicC*", "n")
BUILTIN(__builtin_kvx_fixedwq, "V4iV4fUOicC*", "n")
BUILTIN(__builtin_kvx_floatd, "dOiUOicC*", "n")
BUILTIN(__builtin_kvx_floatdp, "V2dV2OiUOicC*", "n")
BUILTIN(__builtin_kvx_floatdq, "V4dV4OiUOicC*", "n")
BUILTIN(__builtin_kvx_floatud, "dUOiUOicC*", "n")
BUILTIN(__builtin_kvx_floatudp, "V2dV2UOiUOicC*", "n")
BUILTIN(__builtin_kvx_floatudq, "V4dV4UOiUOicC*", "n")
BUILTIN(__builtin_kvx_floatuw, "fUiUOicC*", "n")
BUILTIN(__builtin_kvx_floatuwo, "V8fV8UiUOicC*", "n")
BUILTIN(__builtin_kvx_floatuwp, "V2fV2UiUOicC*", "n")
BUILTIN(__builtin_kvx_floatuwq, "V4fV4UiUOicC*", "n")
BUILTIN(__builtin_kvx_floatw, "fiUOicC*", "n")
BUILTIN(__builtin_kvx_floatwo, "V8fV8iUOicC*", "n")
BUILTIN(__builtin_kvx_floatwp, "V2fV2iUOicC*", "n")
BUILTIN(__builtin_kvx_floatwq, "V4fV4iUOicC*", "n")
BUILTIN(__builtin_kvx_fmaxh, "xxx", "n")
BUILTIN(__builtin_kvx_fmaxhq, "V4xV4xV4x", "n")
BUILTIN(__builtin_kvx_fmaxho, "V8xV8xV8x", "n")
BUILTIN(__builtin_kvx_fmaxhx, "V16xV16xV16x", "n")
BUILTIN(__builtin_kvx_fmaxd, "ddd", "n")
BUILTIN(__builtin_kvx_fmaxdp, "V2dV2dV2d", "n")
BUILTIN(__builtin_kvx_fmaxdq, "V4dV4dV4d", "n")
BUILTIN(__builtin_kvx_fmaxw, "fff", "n")
BUILTIN(__builtin_kvx_fmaxwo, "V8fV8fV8f", "n")
BUILTIN(__builtin_kvx_fmaxwp, "V2fV2fV2f", "n")
BUILTIN(__builtin_kvx_fmaxwq, "V4fV4fV4f", "n")
BUILTIN(__builtin_kvx_fminh, "xxx", "n")
BUILTIN(__builtin_kvx_fminhq, "V4xV4xV4x", "n")
BUILTIN(__builtin_kvx_fminho, "V8xV8xV8x", "n")
BUILTIN(__builtin_kvx_fminhx, "V16xV16xV16x", "n")
BUILTIN(__builtin_kvx_fmind, "ddd", "n")
BUILTIN(__builtin_kvx_fmindp, "V2dV2dV2d", "n")
BUILTIN(__builtin_kvx_fmindq, "V4dV4dV4d", "n")
BUILTIN(__builtin_kvx_fminw, "fff", "n")
BUILTIN(__builtin_kvx_fminwo, "V8fV8fV8f", "n")
BUILTIN(__builtin_kvx_fminwp, "V2fV2fV2f", "n")
BUILTIN(__builtin_kvx_fminwq, "V4fV4fV4f", "n")
BUILTIN(__builtin_kvx_fmm212w, "V4fV2fV2fcC*", "n")
BUILTIN(__builtin_kvx_fmm222w, "V4fV4fV4fcC*", "n")
BUILTIN(__builtin_kvx_fmma212w, "V4fV2fV2fV4fcC*", "n")
BUILTIN(__builtin_kvx_fmma222w, "V4fV4fV4fV4fcC*", "n")
BUILTIN(__builtin_kvx_fmms212w, "V4fV2fV2fV4fcC*", "n")
BUILTIN(__builtin_kvx_fmms222w, "V4fV4fV4fV4fcC*", "n")
BUILTIN(__builtin_kvx_fmulh, "xxxcC*", "n")
BUILTIN(__builtin_kvx_fmulhq, "V4xV4xV4xcC*", "n")
BUILTIN(__builtin_kvx_fmulho, "V8xV8xV8xcC*", "n")
BUILTIN(__builtin_kvx_fmulhx, "V16xV16xV16xcC*", "n")
BUILTIN(__builtin_kvx_fmuldcp, "V4dV4dV4dcC*", "n")
BUILTIN(__builtin_kvx_fmuldc, "V2dV2dV2dcC*", "n")
BUILTIN(__builtin_kvx_fmuld, "dddcC*", "n")
BUILTIN(__builtin_kvx_fmuldp, "V2dV2dV2dcC*", "n")
BUILTIN(__builtin_kvx_fmuldq, "V4dV4dV4dcC*", "n")
BUILTIN(__builtin_kvx_fmulwcp, "V4fV4fV4fcC*", "n")
BUILTIN(__builtin_kvx_fmulwcq, "V8fV8fV8fcC*", "n")
BUILTIN(__builtin_kvx_fmulwc, "V2fV2fV2fcC*", "n")
BUILTIN(__builtin_kvx_fmulw, "fffcC*", "n")
BUILTIN(__builtin_kvx_fmulwo, "V8fV8fV8fcC*", "n")
BUILTIN(__builtin_kvx_fmulwp, "V2fV2fV2fcC*", "n")
BUILTIN(__builtin_kvx_fmulwq, "V4fV4fV4fcC*", "n")
BUILTIN(__builtin_kvx_fnarrowwh, "xfcC*", "n")
BUILTIN(__builtin_kvx_fnarrowwhq, "V4xV4fcC*", "n")
BUILTIN(__builtin_kvx_fnarrowwho, "V8xV8fcC*", "n")
BUILTIN(__builtin_kvx_fnarrowdw, "fdcC*", "n")
BUILTIN(__builtin_kvx_fnarrowdwp, "V2fV2dcC*", "n")
BUILTIN(__builtin_kvx_fnarrowdwq, "V4fV4dcC*", "n")
BUILTIN(__builtin_kvx_fnegd, "dd", "n")
BUILTIN(__builtin_kvx_fnegdp, "V2dV2d", "n")
BUILTIN(__builtin_kvx_fnegdq, "V4dV4d", "n")
BUILTIN(__builtin_kvx_fnegw, "ff", "n")
BUILTIN(__builtin_kvx_fnegwo, "V8fV8f", "n")
BUILTIN(__builtin_kvx_fnegwp, "V2fV2f", "n")
BUILTIN(__builtin_kvx_fnegwq, "V4fV4f", "n")
BUILTIN(__builtin_kvx_frecw, "ffcC*", "n")
BUILTIN(__builtin_kvx_frsrw, "ffcC*", "n")
BUILTIN(__builtin_kvx_fsbfd, "dddcC*", "n")
BUILTIN(__builtin_kvx_fsbfdp, "V2dV2dV2dcC*", "n")
BUILTIN(__builtin_kvx_fsbfdq, "V4dV4dV4dcC*", "n")
BUILTIN(__builtin_kvx_fsbfw, "fffcC*", "n")
BUILTIN(__builtin_kvx_fsbfwo, "V8fV8fV8fcC*", "n")
BUILTIN(__builtin_kvx_fsbfwp, "V2fV2fV2fcC*", "n")
BUILTIN(__builtin_kvx_fsbfwq, "V4fV4fV4fcC*", "n")
BUILTIN(__builtin_kvx_fsdivd, "dddcC*", "n")
BUILTIN(__builtin_kvx_fsdivw, "fffcC*", "n")
BUILTIN(__builtin_kvx_fsrecd, "ddcC*", "n")
BUILTIN(__builtin_kvx_fsrecw, "ffcC*", "n")
BUILTIN(__builtin_kvx_fsrsrd, "dd", "n")
BUILTIN(__builtin_kvx_fsrsrw, "ff", "n")
BUILTIN(__builtin_kvx_fwidenwd, "dfcC*", "n")
BUILTIN(__builtin_kvx_fwidenwdp, "V2dV2fcC*", "n")
BUILTIN(__builtin_kvx_fwidenwdq, "V4dV4fcC*", "n")
BUILTIN(__builtin_kvx_fwidenhw, "fxcC*", "n")
BUILTIN(__builtin_kvx_fwidenhwq, "V4fV4xcC*", "n")
BUILTIN(__builtin_kvx_fwidenhwo, "V8fV8xcC*", "n")

BUILTIN(__builtin_kvx_ffdmdaw, "fV2fV2ffcC*", "n")
BUILTIN(__builtin_kvx_ffdmdawp, "V2fV4fV4fV2fcC*", "n")
BUILTIN(__builtin_kvx_ffdmdawq, "V4fV8fV8fV4fcC*", "n")

// The 8 builtins below are only for LLVM
KVX_BUILTIN(madddt, "V2OiV2OiOiOi", "n", 3, "", )
KVX_BUILTIN(maddsudt, "V2OiV2OiOiUOi", "n", 3, "", )
KVX_BUILTIN(maddudt, "V2UOiV2UOiUOiUOi", "n", 3, "", )
KVX_BUILTIN(madduzdt, "V2UOiV2UOiUOiUOi", "n", 3, "", )
KVX_BUILTIN(msbfdt, "V2OiV2OiOiOi", "n", 3, "", )
KVX_BUILTIN(msbfsudt, "V2OiV2OiUOiOi", "n", 3, "", )
KVX_BUILTIN(msbfudt, "V2UOiV2UOiUOiUOi", "n", 3, "", )
KVX_BUILTIN(msbfuzdt, "V2UOiV2UOiUOiUOi", "n", 3, "", )

BUILTIN(__builtin_kvx_shiftbo, "V8cV8cUic", "n")
BUILTIN(__builtin_kvx_shiftbx, "V16cV16cUic", "n")
BUILTIN(__builtin_kvx_shiftbv, "V32cV32cUic", "n")
BUILTIN(__builtin_kvx_shifthq, "V4sV4sUis", "n")
BUILTIN(__builtin_kvx_shiftho, "V8sV8sUis", "n")
BUILTIN(__builtin_kvx_shifthx, "V16sV16sUis", "n")
BUILTIN(__builtin_kvx_shiftwp, "V2iV2iUii", "n")
BUILTIN(__builtin_kvx_shiftwq, "V4iV4iUii", "n")
BUILTIN(__builtin_kvx_shiftwo, "V8iV8iUii", "n")
BUILTIN(__builtin_kvx_shiftdp, "V2OiV2OiUiOi", "n")
BUILTIN(__builtin_kvx_shiftdq, "V4OiV4OiUiOi", "n")
BUILTIN(__builtin_kvx_shiftfhq, "V4xV4xUix", "n")
BUILTIN(__builtin_kvx_shiftfho, "V8xV8xUix", "n")
BUILTIN(__builtin_kvx_shiftfhx, "V16xV16xUix", "n")
BUILTIN(__builtin_kvx_shiftfwp, "V2fV2fUif", "n")
BUILTIN(__builtin_kvx_shiftfwq, "V4fV4fUif", "n")
BUILTIN(__builtin_kvx_shiftfwo, "V8fV8fUif", "n")
BUILTIN(__builtin_kvx_shiftfdp, "V2dV2dUid", "n")
BUILTIN(__builtin_kvx_shiftfdq, "V4dV4dUid", "n")

//===----------------------------------------------------------------------===//
// ALU
//===----------------------------------------------------------------------===//

BUILTIN(__builtin_kvx_abdd, "OiOiOi", "n")
BUILTIN(__builtin_kvx_abddp, "V2OiV2OiV2Oi", "n")
BUILTIN(__builtin_kvx_abddq, "V4OiV4OiV4Oi", "n")
BUILTIN(__builtin_kvx_abdhq, "V4sV4sV4s", "n")
BUILTIN(__builtin_kvx_abdho, "V8sV8sV8s", "n")
BUILTIN(__builtin_kvx_abdhx, "V16sV16sV16s", "n")
BUILTIN(__builtin_kvx_abdw, "iii", "n")
BUILTIN(__builtin_kvx_abdwp, "V2iV2iV2i", "n")
BUILTIN(__builtin_kvx_abdwq, "V4iV4iV4i", "n")
BUILTIN(__builtin_kvx_abdwo, "V8iV8iV8i", "n")
BUILTIN(__builtin_kvx_addcd, "UOiUOiUOicC*", "n")
BUILTIN(__builtin_kvx_addbo, "V8cV8cV8ccC*", "n")
BUILTIN(__builtin_kvx_addbx, "V16cV16cV16ccC*", "n")
BUILTIN(__builtin_kvx_addbv, "V32cV32cV32ccC*", "n")
BUILTIN(__builtin_kvx_addhq, "V4sV4sV4scC*", "n")
BUILTIN(__builtin_kvx_addho, "V8sV8sV8scC*", "n")
BUILTIN(__builtin_kvx_addhx, "V16sV16sV16scC*", "n")
BUILTIN(__builtin_kvx_addw, "iiicC*", "n")
BUILTIN(__builtin_kvx_addwp, "V2iV2iV2icC*", "n")
BUILTIN(__builtin_kvx_addwq, "V4iV4iV4icC*", "n")
BUILTIN(__builtin_kvx_addwo, "V8iV8iV8icC*", "n")
BUILTIN(__builtin_kvx_addd, "OiOiOicC*", "n")
BUILTIN(__builtin_kvx_adddp, "V2OiV2OiV2OicC*", "n")
BUILTIN(__builtin_kvx_adddq, "V4OiV4OiV4OicC*", "n")
BUILTIN(__builtin_kvx_avghq, "V4sV4sV4scC*", "n")
BUILTIN(__builtin_kvx_avgho, "V8sV8sV8scC*", "n")
BUILTIN(__builtin_kvx_avghx, "V16sV16sV16scC*", "n")
BUILTIN(__builtin_kvx_avgw, "iiicC*", "n")
BUILTIN(__builtin_kvx_avgwp, "V2iV2iV2icC*", "n")
BUILTIN(__builtin_kvx_avgwq, "V4iV4iV4icC*", "n")
BUILTIN(__builtin_kvx_avgwo, "V8iV8iV8icC*", "n")
BUILTIN(__builtin_kvx_bitcntd, "OiOicC*", "n")
BUILTIN(__builtin_kvx_bitcntdp, "V2OiV2OicC*", "n")
BUILTIN(__builtin_kvx_bitcntdq, "V4OiV4OicC*", "n")
BUILTIN(__builtin_kvx_bitcntwp, "V2iV2icC*", "n")
BUILTIN(__builtin_kvx_bitcntwq, "V4iV4icC*", "n")
BUILTIN(__builtin_kvx_bitcntwo, "V8iV8icC*", "n")
BUILTIN(__builtin_kvx_bitcntw, "iicC*", "n")
BUILTIN(__builtin_kvx_maxd, "OiOiOi", "n")
BUILTIN(__builtin_kvx_maxdp, "V2OiV2OiV2Oi", "n")
BUILTIN(__builtin_kvx_maxdq, "V4OiV4OiV4Oi", "n")
BUILTIN(__builtin_kvx_maxhq, "V4sV4sV4s", "n")
BUILTIN(__builtin_kvx_maxho, "V8sV8sV8s", "n")
BUILTIN(__builtin_kvx_maxhx, "V16sV16sV16s", "n")
BUILTIN(__builtin_kvx_maxw, "iii", "n")
BUILTIN(__builtin_kvx_maxwp, "V2iV2iV2i", "n")
BUILTIN(__builtin_kvx_maxwq, "V4iV4iV4i", "n")
BUILTIN(__builtin_kvx_maxwo, "V8iV8iV8i", "n")
BUILTIN(__builtin_kvx_mind, "OiOiOi", "n")
BUILTIN(__builtin_kvx_mindp, "V2OiV2OiV2Oi", "n")
BUILTIN(__builtin_kvx_mindq, "V4OiV4OiV4Oi", "n")
BUILTIN(__builtin_kvx_minhq, "V4sV4sV4s", "n")
BUILTIN(__builtin_kvx_minho, "V8sV8sV8s", "n")
BUILTIN(__builtin_kvx_minhx, "V16sV16sV16s", "n")
BUILTIN(__builtin_kvx_minw, "iii", "n")
BUILTIN(__builtin_kvx_minwp, "V2iV2iV2i", "n")
BUILTIN(__builtin_kvx_minwq, "V4iV4iV4i", "n")
BUILTIN(__builtin_kvx_minwo, "V8iV8iV8i", "n")
BUILTIN(__builtin_kvx_maxud, "UOiUOiUOi", "n")
BUILTIN(__builtin_kvx_maxudp, "V2UOiV2UOiV2UOi", "n")
BUILTIN(__builtin_kvx_maxudq, "V4UOiV4UOiV4UOi", "n")
BUILTIN(__builtin_kvx_maxuhq, "V4UsV4UsV4Us", "n")
BUILTIN(__builtin_kvx_maxuho, "V8UsV8UsV8Us", "n")
BUILTIN(__builtin_kvx_maxuhx, "V16UsV16UsV16Us", "n")
BUILTIN(__builtin_kvx_maxuw, "UiUiUi", "n")
BUILTIN(__builtin_kvx_maxuwp, "V2UiV2UiV2Ui", "n")
BUILTIN(__builtin_kvx_maxuwq, "V4UiV4UiV4Ui", "n")
BUILTIN(__builtin_kvx_maxuwo, "V8UiV8UiV8Ui", "n")
BUILTIN(__builtin_kvx_minud, "UOiUOiUOi", "n")
BUILTIN(__builtin_kvx_minudp, "V2UOiV2UOiV2UOi", "n")
BUILTIN(__builtin_kvx_minudq, "V4UOiV4UOiV4UOi", "n")
BUILTIN(__builtin_kvx_minuhq, "V4UsV4UsV4Us", "n")
BUILTIN(__builtin_kvx_minuho, "V8UsV8UsV8Us", "n")
BUILTIN(__builtin_kvx_minuhx, "V16UsV16UsV16Us", "n")
BUILTIN(__builtin_kvx_minuw, "UiUiUi", "n")
BUILTIN(__builtin_kvx_minuwp, "V2UiV2UiV2Ui", "n")
BUILTIN(__builtin_kvx_minuwq, "V4UiV4UiV4Ui", "n")
BUILTIN(__builtin_kvx_minuwo, "V8UiV8UiV8Ui", "n")
BUILTIN(__builtin_kvx_negbo, "V8cV8ccC*", "n")
BUILTIN(__builtin_kvx_negbx, "V16cV16ccC*", "n")
BUILTIN(__builtin_kvx_negbv, "V32cV32ccC*", "n")
BUILTIN(__builtin_kvx_neghq, "V4sV4scC*", "n")
BUILTIN(__builtin_kvx_negho, "V8sV8scC*", "n")
BUILTIN(__builtin_kvx_neghx, "V16sV16scC*", "n")
BUILTIN(__builtin_kvx_negw, "iicC*", "n")
BUILTIN(__builtin_kvx_negwp, "V2iV2icC*", "n")
BUILTIN(__builtin_kvx_negwq, "V4iV4icC*", "n")
BUILTIN(__builtin_kvx_negwo, "V8iV8icC*", "n")
BUILTIN(__builtin_kvx_negd, "OiOicC*", "n")
BUILTIN(__builtin_kvx_negdp, "V2OiV2OicC*", "n")
BUILTIN(__builtin_kvx_negdq, "V4OiV4OicC*", "n")
BUILTIN(__builtin_kvx_sbfcd, "UOiUOiUOicC*", "n")
BUILTIN(__builtin_kvx_sbfbo, "V8cV8cV8ccC*", "n")
BUILTIN(__builtin_kvx_sbfbx, "V16cV16cV16ccC*", "n")
BUILTIN(__builtin_kvx_sbfbv, "V32cV32cV32ccC*", "n")
BUILTIN(__builtin_kvx_sbfhq, "V4sV4sV4scC*", "n")
BUILTIN(__builtin_kvx_sbfho, "V8sV8sV8scC*", "n")
BUILTIN(__builtin_kvx_sbfhx, "V16sV16sV16scC*", "n")
BUILTIN(__builtin_kvx_sbfw, "iiicC*", "n")
BUILTIN(__builtin_kvx_sbfwp, "V2iV2iV2icC*", "n")
BUILTIN(__builtin_kvx_sbfwq, "V4iV4iV4icC*", "n")
BUILTIN(__builtin_kvx_sbfwo, "V8iV8iV8icC*", "n")
BUILTIN(__builtin_kvx_sbfd, "OiOiOicC*", "n")
BUILTIN(__builtin_kvx_sbfdp, "V2OiV2OiV2OicC*", "n")
BUILTIN(__builtin_kvx_sbfdq, "V4OiV4OiV4OicC*", "n")
BUILTIN(__builtin_kvx_sbmm8, "UOiUOiUOi", "n")
BUILTIN(__builtin_kvx_sbmmt8, "UOiUOiUOi", "n")
BUILTIN(__builtin_kvx_shlhqs, "V4sV4sUOi", "n")
BUILTIN(__builtin_kvx_shlhos, "V8sV8sUOi", "n")
BUILTIN(__builtin_kvx_shlhxs, "V16sV16sUOi", "n")
BUILTIN(__builtin_kvx_shlwps, "V2iV2iUOi", "n")
BUILTIN(__builtin_kvx_shlwqs, "V4iV4iUOi", "n")
BUILTIN(__builtin_kvx_shlwos, "V8iV8iUOi", "n")
BUILTIN(__builtin_kvx_shldps, "V2OiV2OiUOi", "n")
BUILTIN(__builtin_kvx_shldqs, "V4OiV4OiUOi", "n")
BUILTIN(__builtin_kvx_shrhqs, "V4sV4sUOi", "n")
BUILTIN(__builtin_kvx_shrhos, "V8sV8sUOi", "n")
BUILTIN(__builtin_kvx_shrhxs, "V16sV16sUOi", "n")
BUILTIN(__builtin_kvx_shrwps, "V2iV2iUOi", "n")
BUILTIN(__builtin_kvx_shrwqs, "V4iV4iUOi", "n")
BUILTIN(__builtin_kvx_shrwos, "V8iV8iUOi", "n")
BUILTIN(__builtin_kvx_shrdps, "V2OiV2OiUOi", "n")
BUILTIN(__builtin_kvx_shrdqs, "V4OiV4OiUOi", "n")
BUILTIN(__builtin_kvx_stsud, "UOiUOiUOi", "n")
BUILTIN(__builtin_kvx_stsuw, "UiUiUi", "n")

KVX_BUILTIN(sxlbhq, "V4sV8c", "n", 1, "",)
KVX_BUILTIN(sxmbhq, "V4sV8c", "n", 1, "",)

KVX_BUILTIN(sxlhwp, "V2iV4s", "n", 1, "",)
KVX_BUILTIN(sxmhwp, "V2iV4s", "n", 1, "",)

//===----------------------------------------------------------------------===//
// KV3 V2 builtins
//===----------------------------------------------------------------------===//
KVX_BUILTIN(ald, "OivC*cC*", "n", 2, "kv3-2", KVX_COHERENCY)
KVX_BUILTIN(alw, "ivC*cC*", "n", 2, "kv3-2", KVX_COHERENCY)
KVX_BUILTIN(asd, "vv*OicC*", "n", 3, "kv3-2", KVX_COHERENCY)
KVX_BUILTIN(asw, "vv*icC*", "n", 3, "kv3-2", KVX_COHERENCY)

KVX_BUILTIN(dflushsw, "vUOiUOicC*", "n", 3, "kv3-2", KVX_CACHELEVEL)
KVX_BUILTIN(dinvalsw, "vUOiUOicC*", "n", 3, "kv3-2", KVX_CACHELEVEL)
KVX_BUILTIN(dpurgesw, "vUOiUOicC*", "n", 3, "kv3-2", KVX_CACHELEVEL)

KVX_BUILTIN(dpurgel, "vvC*", "n", 1, "kv3-2", )
KVX_BUILTIN(dflushl, "vvC*", "n", 1, "kv3-2", )

KVX_BUILTIN(zxlbhq, "V4UsV8Uc", "n", 1, "kv3-2",)
KVX_BUILTIN(zxmbhq, "V4UsV8Uc", "n", 1, "kv3-2",)

KVX_BUILTIN(zxlhwp, "V2UiV4Us", "n", 1, "kv3-2",)
KVX_BUILTIN(zxmhwp, "V2UiV4Us", "n", 1, "kv3-2",)

KVX_BUILTIN(stsuhq, "V4sV4sV4s", "n", 2, "kv3-2",)
KVX_BUILTIN(stsuwp, "V2iV2iV2i", "n", 2, "kv3-2",)

//===----------------------------------------------------------------------===//
// TCA
//===----------------------------------------------------------------------===//
KVX_BUILTIN(xmovetq, "Tx256Tx256OiOicC*", "n", 4, "", KvxHindex)
NARY_BUILTIN(xmoveto, "Tx256OiOiOiOi", "n", 4)
NARY_BUILTIN(xmoveoto, "Tx256V4Oi", "n", 1)

NARY_BUILTIN(xmovefo, "V4OiTx256", "n", 1)

NARY_BUILTIN(xinsertwm, "Tx1024Tx1024Tx512IUi", "n", 3)
NARY_BUILTIN(xinsertvm, "Tx1024Tx1024Tx256IUi", "n", 3)
NARY_BUILTIN(xinsertvw, "Tx512Tx512Tx256IUi", "n", 3)

NARY_BUILTIN(xmovefmw, "Tx512Tx1024IUi", "n", 2)
NARY_BUILTIN(xmovefmv, "Tx256Tx1024IUi", "n", 2)
NARY_BUILTIN(xmovefwv, "Tx256Tx512IUi", "n", 2)

NARY_BUILTIN(xbuildfvm, "Tx1024Tx256Tx256Tx256Tx256", "n", 4)
NARY_BUILTIN(xbuildfwm, "Tx1024Tx512Tx512", "n", 2)
NARY_BUILTIN(xbuildfvw, "Tx512Tx256Tx256", "n", 2)

NARY_BUILTIN(xaccess512o, "V4OiTx512UOi", "n", 2)
NARY_BUILTIN(xalign512o, "Tx256Tx512UOi", "n", 2)

BUILTIN(__builtin_kvx_xswap256, "V4OiTx256*V4Oi", "n")

BUILTIN(__builtin_kvx_xconvdhv0, "Tx256Tx256Tx1024cC*", "n")
BUILTIN(__builtin_kvx_xconvdhv1, "Tx256Tx256Tx1024cC*", "n")
BUILTIN(__builtin_kvx_xconvdhv,  "Tx256Tx1024cC*", "n")

BUILTIN(__builtin_kvx_xconvwbv0, "Tx256Tx256Tx1024cC*", "n")
BUILTIN(__builtin_kvx_xconvwbv1, "Tx256Tx256Tx1024cC*", "n")
BUILTIN(__builtin_kvx_xconvwbv2, "Tx256Tx256Tx1024cC*", "n")
BUILTIN(__builtin_kvx_xconvwbv3, "Tx256Tx256Tx1024cC*", "n")
BUILTIN(__builtin_kvx_xconvwbv,  "Tx256Tx1024cC*", "n")

NARY_BUILTIN(xfmma242hw0, "Tx256Tx256Tx512Tx256Tx256", "n", 4)
NARY_BUILTIN(xfmma242hw1, "Tx256Tx256Tx512Tx256Tx256", "n", 4)
NARY_BUILTIN(xfmma242hw2, "Tx256Tx256Tx512Tx256Tx256", "n", 4)
NARY_BUILTIN(xfmma242hw3, "Tx256Tx256Tx512Tx256Tx256", "n", 4)
NARY_BUILTIN(xfmma444hw,  "Tx512Tx512Tx256Tx256", "n", 3)

KVX_BUILTIN(xmma444hbd0, "Tx1024Tx256Tx256Tx1024cC*", "n", 4, "", KvxUnSignMod)
KVX_BUILTIN(xmma444hbd1, "Tx1024Tx256Tx256Tx1024cC*", "n", 4, "", KvxUnSignMod)
KVX_BUILTIN(xmma484hbd, "Tx1024Tx512Tx256Tx1024cC*", "n", 4, "", KvxUnSignMod)
KVX_BUILTIN(xmma484bw, "Tx512Tx256Tx256Tx512cC*", "n", 4, "", KvxUnSignMod)
KVX_BUILTIN(xmt44d, "Tx1024Tx1024", "n", 1, "", )

BUILTIN(__builtin_kvx_xfscalewv, "Tx256Tx256cC*", "n")
BUILTIN(__builtin_kvx_xfnarrowwhv, "Tx256Tx512cC*", "n")

//===----------------------------------------------------------------------===//
// KV3 V1 TCA builtins
//===----------------------------------------------------------------------===//

KVX_BUILTIN(lv, "Tx256vC*cC*", "n", 2, "kv3-1", KVX_SPECULATE)
KVX_BUILTIN(lv_cond, "Tx256Tx256D&vC*OiCcC*", "n", 4, "kv3-1", KVX_SPECULATE, KVX_LSUCOND)
KVX_BUILTIN(lvc, "Tx1024Tx1024&vC*cC*", "n", 3, "kv3-1", KVX_COLUMN, KVX_SPECULATE)
KVX_BUILTIN(lvc_cond, "Tx1024Tx1024&vC*OicC*", "n", 4, "kv3-1", KVX_COLUMN, KVX_SPECULATE, KVX_LSUCOND)

KVX_BUILTIN(sv, "vvC*Tx256", "n", 2, "kv3-1", )
KVX_BUILTIN(sv_cond, "vvC*Tx256OiCcC*", "n", 4, "kv3-1", KVX_LSUCOND)

KVX_BUILTIN(xmma444hd, "Tx1024Tx256Tx256Tx1024cC*", "n", 4, "kv3-1", KvxUnSignMod)

//===----------------------------------------------------------------------===//
// KV3 V2 TCA builtins
//===----------------------------------------------------------------------===//

KVX_BUILTIN(xclampwo, "Tx256Tx256Tx256Tx256", "n", 3, "kv3-2", )
KVX_BUILTIN(xmadd44bw0, "Tx512Tx256Tx256Tx512cC*", "n", 4, "kv3-2", KvxExtendMul)
KVX_BUILTIN(xmadd44bw1, "Tx512Tx256Tx256Tx512cC*", "n", 4, "kv3-2", KvxExtendMul)
KVX_BUILTIN(xmma4164bw, "Tx512Tx512Tx512Tx512cC*", "n", 4, "kv3-2", KvxUnSignMod)
KVX_BUILTIN(xsx48bw, "Tx1024Tx256", "n", 1, "kv3-2", )
KVX_BUILTIN(xzx48bw, "Tx1024Tx256", "n", 1, "kv3-2", )
KVX_BUILTIN(xtrunc48wb, "Tx256Tx1024", "n", 1, "kv3-2", )
KVX_BUILTIN(xffma44hw, "Tx512Tx256Tx256Tx512cC*", "n", 4, "kv3-2", KVX_ROUNDING, KVX_SILENT)
BUILTIN(__builtin_kvx_xfmma484hw, "Tx512Tx512Tx512Tx512cC*", "n")
BUILTIN(__builtin_kvx_xfnarrow44wh, "Tx256Tx512cC*", "n")
BUILTIN(__builtin_kvx_xfscalewo, "Tx256Tx256icC*", "n")
BUILTIN(__builtin_kvx_xmaddifwo, "Tx256Tx256Tx256Tx256cC*", "n")
BUILTIN(__builtin_kvx_xmsbfifwo, "Tx256Tx256Tx256Tx256cC*", "n")

BUILTIN(__builtin_kvx_fscalewv, "Tx256Tx256cC*", "n")
BUILTIN(__builtin_kvx_fnarrowwhv, "Tx256Tx512cC*", "n")

KVX_BUILTIN(xload256, "Tx256vC*cC*", "n", 2, "kv3-2", KVX_VARIANT)
KVX_BUILTIN(xloadc256, "Tx256Tx256&vC*OiCcC*", "n", 4, "kv3-2", KVX_VARIANT, KVX_LSUMASK)
KVX_BUILTIN(xload512, "Tx512vC*cC*", "n", 2, "kv3-2", KVX_VARIANT)
KVX_BUILTIN(xloadc512, "Tx512Tx512&vC*OiCcC*", "n", 4, "kv3-2", KVX_VARIANT, KVX_LSUMASK)
KVX_BUILTIN(xload1024, "Tx1024vC*cC*", "n", 2, "kv3-2", KVX_VARIANT)
KVX_BUILTIN(xloadc1024, "Tx1024Tx1024&vC*V4icC*", "n", 4, "kv3-2", KVX_VARIANT, KVX_LSUMASK)
KVX_BUILTIN(xloads1024, "Tx1024Tx1024&vC*cC*", "n", 3, "kv3-2", KVX_VARIANT, KVX_QINDEX)
KVX_BUILTIN(xloadsc1024, "Tx1024Tx1024&vC*OiCcC*", "n", 4, "kv3-2", KVX_VARIANT, KVX_LSUMASK, KVX_QINDEX)

KVX_BUILTIN(xloadbuff512, "Tx512vC*OiTx512cC*", "n", 4, "kv3-2", KVX_VARIANT, KVX_LSUPACK)
KVX_BUILTIN(xloadbuff1024, "Tx1024vC*OiTx1024cC*", "n", 4, "kv3-2", KVX_VARIANT, KVX_LSUPACK)

KVX_BUILTIN(xstore256, "vTx256vC*", "n", 2, "kv3-2", )
KVX_BUILTIN(xstorec256, "vTx256vC*OicC*", "n", 4, "kv3-2", KVX_LSUMASK)

KVX_BUILTIN(xsendo, "vTx256cC*", "", 2, "kv3-2", KVX_SCHANNEL)
KVX_BUILTIN(xrecvo, "Tx256cC*", "", 1, "kv3-2", KVX_RCHANNEL)
KVX_BUILTIN(xsendrecvo, "Tx256Tx256cC*", "", 2, "kv3-2", KVX_SCHANNEL, KVX_RCHANNEL)

KVX_BUILTIN(xcopyv, "Tx1024Tx1024cC*", "n", 2, "kv3-2", KVX_SHUFFLEV)
KVX_BUILTIN(xcopyx, "Tx512Tx512cC*", "n", 2, "kv3-2", KVX_SHUFFLEX)

KVX_BUILTIN(xfmaxhx, "Tx256Tx256Tx256", "n", 2, "kv3-2", )
KVX_BUILTIN(xfminhx, "Tx256Tx256Tx256", "n", 2, "kv3-2", )

KVX_BUILTIN(xsplatov, "Tx1024Tx256cC*", "n", 2, "kv3-2", KVX_SHUFFLEV)
KVX_BUILTIN(xsplatox, "Tx512Tx256cC*", "n", 2, "kv3-2", KVX_SHUFFLEX)
KVX_BUILTIN(xsplatdo, "Tx256OIi", "n", 1, "kv3-2", )

KVX_BUILTIN(xalign1024o, "Tx256Tx1024UOi", "n", 2, "kv3-2", )
KVX_BUILTIN(xaccess1024o, "V4OiTx1024UOi", "n", 2, "kv3-2", )

#undef KVX_BUILTIN
#undef NARY_BUILTIN
#undef BUILTIN
