// NOTE: Assertions have been autogenerated by utils/update_cc_test_checks.py
// RUN: %clang_cc1 -O2 -triple kvx-kalray-cos -S -emit-llvm -target-cpu kv3-2 -o - -x c %s | FileCheck %s

typedef unsigned short short2 __attribute__ ((vector_size (sizeof(short) * 2)));
typedef unsigned short short4 __attribute__ ((vector_size (sizeof(short) * 4)));
typedef unsigned int int2 __attribute__ ((vector_size (sizeof(int) * 2)));
typedef unsigned long ulong;
typedef ulong ulong2 __attribute__ ((vector_size (sizeof(ulong) * 2)));
typedef ulong ulong4 __attribute__ ((vector_size (sizeof(ulong) * 4)));
typedef ulong ulong8 __attribute__ ((vector_size (sizeof(ulong) * 8)));
typedef unsigned uint;

// CHECK-LABEL: @stsudp(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = extractelement <2 x i64> [[L:%.*]], i64 0
// CHECK-NEXT:    [[TMP1:%.*]] = tail call i64 @llvm.kvx.stsu.i64(i64 [[TMP0]], i64 48879)
// CHECK-NEXT:    [[TMP2:%.*]] = extractelement <2 x i64> [[L]], i64 1
// CHECK-NEXT:    [[TMP3:%.*]] = tail call i64 @llvm.kvx.stsu.i64(i64 [[TMP2]], i64 -4688547448578183441)
// CHECK-NEXT:    [[TMP4:%.*]] = insertelement <2 x i64> undef, i64 [[TMP1]], i32 0
// CHECK-NEXT:    [[TMP5:%.*]] = insertelement <2 x i64> [[TMP4]], i64 [[TMP3]], i32 1
// CHECK-NEXT:    ret <2 x i64> [[TMP5]]
//
ulong2 stsudp(ulong2 l) {
  ulong2 r = {0xbeef, 0xbeeeeeefbeeeeeef};
  return __builtin_kvx_stsudp(l, r);
}

// CHECK-LABEL: @stsud_ri(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = tail call i64 @llvm.kvx.stsu.i64(i64 [[V:%.*]], i64 3735928559)
// CHECK-NEXT:    ret i64 [[TMP0]]
//
ulong stsud_ri(ulong v){
  return __builtin_kvx_stsud(v, 0xdeadbeef);
}

// CHECK-LABEL: @stsud_riat(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = tail call i64 @llvm.kvx.stsu.i64(i64 [[V:%.*]], i64 -2401053088876216593)
// CHECK-NEXT:    ret i64 [[TMP0]]
//
ulong stsud_riat(ulong v){
  return __builtin_kvx_stsud(v, 0xdeadbeefdeadbeef);
}

// CHECK-LABEL: @stsuw_ri(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = tail call i32 @llvm.kvx.stsu.i32(i32 [[V:%.*]], i32 17)
// CHECK-NEXT:    ret i32 [[TMP0]]
//
uint stsuw_ri(uint v){
  return __builtin_kvx_stsuw(v, 17);
}

// CHECK-LABEL: @stsuhp(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = tail call <2 x i16> @llvm.kvx.stsu.v2i16(<2 x i16> [[V:%.*]], <2 x i16> [[A:%.*]])
// CHECK-NEXT:    ret <2 x i16> [[TMP0]]
//
short2 stsuhp(short2 v, short2 a){
  return __builtin_kvx_stsuhp(v, a);
}

// CHECK-LABEL: @stsuhpri(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = tail call <2 x i16> @llvm.kvx.stsu.v2i16(<2 x i16> [[V:%.*]], <2 x i16> <i16 150, i16 102>)
// CHECK-NEXT:    ret <2 x i16> [[TMP0]]
//
short2 stsuhpri(short2 v){
  short2 a = {150, 102};
  return __builtin_kvx_stsuhp(v, a);
}


// CHECK-LABEL: @stsuhq(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = tail call <4 x i16> @llvm.kvx.stsu.v4i16(<4 x i16> [[V:%.*]], <4 x i16> [[A:%.*]])
// CHECK-NEXT:    ret <4 x i16> [[TMP0]]
//
short4 stsuhq(short4 v, short4 a){
  return __builtin_kvx_stsuhq(v, a);
}

// CHECK-LABEL: @stsuhqri(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = tail call <4 x i16> @llvm.kvx.stsu.v4i16(<4 x i16> [[V:%.*]], <4 x i16> <i16 15, i16 12, i16 0, i16 0>)
// CHECK-NEXT:    ret <4 x i16> [[TMP0]]
//
short4 stsuhqri(short4 v){
  short4 a = {15, 12, 0, 0};
  return __builtin_kvx_stsuhq(v, a);
}

// CHECK-LABEL: @stsuhqriat(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = tail call <4 x i16> @llvm.kvx.stsu.v4i16(<4 x i16> [[V:%.*]], <4 x i16> <i16 15, i16 12, i16 15, i16 12>)
// CHECK-NEXT:    ret <4 x i16> [[TMP0]]
//
short4 stsuhqriat(short4 v){
  short4 a = {15, 12, 15, 12};
  return __builtin_kvx_stsuhq(v, a);
}

// CHECK-LABEL: @stsuwp(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = tail call <2 x i32> @llvm.kvx.stsu.v2i32(<2 x i32> [[V:%.*]], <2 x i32> [[A:%.*]])
// CHECK-NEXT:    ret <2 x i32> [[TMP0]]
//
int2 stsuwp(int2 v, int2 a){
  return __builtin_kvx_stsuwp(v, a);
}

// CHECK-LABEL: @stsuwpri(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = tail call <2 x i32> @llvm.kvx.stsu.v2i32(<2 x i32> [[V:%.*]], <2 x i32> <i32 999, i32 0>)
// CHECK-NEXT:    ret <2 x i32> [[TMP0]]
//
int2 stsuwpri(int2 v){
  int2 a = {999, 0};
  return __builtin_kvx_stsuwp(v, a);
}

// CHECK-LABEL: @stsuwpriat(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = tail call <2 x i32> @llvm.kvx.stsu.v2i32(<2 x i32> [[V:%.*]], <2 x i32> <i32 999, i32 999>)
// CHECK-NEXT:    ret <2 x i32> [[TMP0]]
//
int2 stsuwpriat(int2 v){
  int2 a = {999, 999};
  return __builtin_kvx_stsuwp(v, a);
}
