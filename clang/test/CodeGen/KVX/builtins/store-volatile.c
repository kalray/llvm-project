// NOTE: Assertions have been autogenerated by utils/update_cc_test_checks.py
// RUN: %clang_cc1 -triple kvx-kalray-cos -S -O2 -emit-llvm -o - %s | FileCheck %s

#define FALSE 0
#define TRUE 1

// CHECK-LABEL: @ld(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[KVXLD:%.*]] = load volatile i64, ptr [[P:%.*]], align 1
// CHECK-NEXT:    [[KVXLD1:%.*]] = load volatile i64, ptr [[P]], align 1
// CHECK-NEXT:    [[KVXLD2:%.*]] = load volatile i64, ptr [[P]], align 1
// CHECK-NEXT:    [[KVXLD3:%.*]] = load volatile i64, ptr [[P]], align 1
// CHECK-NEXT:    ret i64 [[KVXLD3]]
//
long ld(volatile void *p) {
  long ret;
  ret = __builtin_kvx_ld(p, "", TRUE);
  ret = __builtin_kvx_ld(p, "", TRUE);
  ret = __builtin_kvx_ld(p, "", FALSE);
  ret = __builtin_kvx_ld(p, "", FALSE);
  return ret;
}
