// NOTE: Assertions have been autogenerated by utils/update_cc_test_checks.py
// RUN: %clang_cc1 -O3 -triple kvx-kalray-cos -S -emit-llvm -target-cpu kv3-2 -o - %s | FileCheck %s

// Generated from base/storec.C

typedef int __attribute__((__vector_size__(2 * sizeof(int)))) v2i32;
typedef int __attribute__((__vector_size__(4 * sizeof(int)))) v4i32;
typedef int __attribute__((__vector_size__(8 * sizeof(int)))) v8i32;
typedef short __attribute__((__vector_size__(4 * sizeof(short)))) v4i16;
typedef short __attribute__((__vector_size__(8 * sizeof(short)))) v8i16;
typedef short __attribute__((__vector_size__(16 * sizeof(short)))) v16i16;

// CHECK-LABEL: @storec256_mt(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = bitcast <8 x i32> [[A:%.*]] to <4 x i64>
// CHECK-NEXT:    tail call void (<4 x i64>, ptr, i32, i64, i32, i32, ...) @llvm.kvx.storec.v4i64.p0(<4 x i64> [[TMP0]], ptr [[PTR:%.*]], i32 256, i64 [[COND:%.*]], i32 -1, i32 4)
// CHECK-NEXT:    ret void
//
void storec256_mt(v8i32 a, void *ptr, unsigned long cond) { __builtin_kvx_storec256(a, ptr, cond, ".mt"); }

// CHECK-LABEL: @storec256_mf(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = bitcast <8 x i32> [[A:%.*]] to <4 x i64>
// CHECK-NEXT:    tail call void (<4 x i64>, ptr, i32, i64, i32, i32, ...) @llvm.kvx.storec.v4i64.p0(<4 x i64> [[TMP0]], ptr [[PTR:%.*]], i32 256, i64 [[COND:%.*]], i32 -1, i32 5)
// CHECK-NEXT:    ret void
//
void storec256_mf(v8i32 a, void *ptr, unsigned long cond) { __builtin_kvx_storec256(a, ptr, cond, ".mf"); }

// CHECK-LABEL: @storec128_mt(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = bitcast <4 x i32> [[A:%.*]] to <2 x i64>
// CHECK-NEXT:    [[TMP1:%.*]] = shufflevector <2 x i64> [[TMP0]], <2 x i64> poison, <4 x i32> <i32 0, i32 1, i32 poison, i32 poison>
// CHECK-NEXT:    [[TMP2:%.*]] = and i64 [[COND:%.*]], 65535
// CHECK-NEXT:    [[TMP3:%.*]] = shufflevector <4 x i64> [[TMP1]], <4 x i64> <i64 poison, i64 poison, i64 undef, i64 undef>, <4 x i32> <i32 0, i32 1, i32 6, i32 7>
// CHECK-NEXT:    tail call void (<4 x i64>, ptr, i32, i64, i32, i32, ...) @llvm.kvx.storec.v4i64.p0(<4 x i64> [[TMP3]], ptr [[PTR:%.*]], i32 256, i64 [[TMP2]], i32 -1, i32 4)
// CHECK-NEXT:    ret void
//
void storec128_mt(v4i32 a, void *ptr, unsigned long cond) { __builtin_kvx_storec128(a, ptr, cond, ".mt"); }

// CHECK-LABEL: @storec128_mf(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = bitcast <4 x i32> [[A:%.*]] to <2 x i64>
// CHECK-NEXT:    [[TMP1:%.*]] = shufflevector <2 x i64> [[TMP0]], <2 x i64> poison, <4 x i32> <i32 0, i32 1, i32 poison, i32 poison>
// CHECK-NEXT:    [[TMP2:%.*]] = or i64 [[COND:%.*]], -65536
// CHECK-NEXT:    [[TMP3:%.*]] = shufflevector <4 x i64> [[TMP1]], <4 x i64> <i64 poison, i64 poison, i64 undef, i64 undef>, <4 x i32> <i32 0, i32 1, i32 6, i32 7>
// CHECK-NEXT:    tail call void (<4 x i64>, ptr, i32, i64, i32, i32, ...) @llvm.kvx.storec.v4i64.p0(<4 x i64> [[TMP3]], ptr [[PTR:%.*]], i32 256, i64 [[TMP2]], i32 -1, i32 5)
// CHECK-NEXT:    ret void
//
void storec128_mf(v4i32 a, void *ptr, unsigned long cond) { __builtin_kvx_storec128(a, ptr, cond, ".mf"); }

// CHECK-LABEL: @storec64_mt(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = and i64 [[COND:%.*]], 255
// CHECK-NEXT:    [[TMP1:%.*]] = bitcast <2 x i32> [[A:%.*]] to <1 x i64>
// CHECK-NEXT:    [[TMP2:%.*]] = shufflevector <1 x i64> [[TMP1]], <1 x i64> poison, <4 x i32> <i32 0, i32 poison, i32 poison, i32 poison>
// CHECK-NEXT:    [[TMP3:%.*]] = shufflevector <4 x i64> [[TMP2]], <4 x i64> <i64 poison, i64 undef, i64 undef, i64 undef>, <4 x i32> <i32 0, i32 5, i32 6, i32 7>
// CHECK-NEXT:    tail call void (<4 x i64>, ptr, i32, i64, i32, i32, ...) @llvm.kvx.storec.v4i64.p0(<4 x i64> [[TMP3]], ptr [[PTR:%.*]], i32 256, i64 [[TMP0]], i32 -1, i32 4)
// CHECK-NEXT:    ret void
//
void storec64_mt(v2i32 a, void *ptr, unsigned long cond) { __builtin_kvx_storec64(a, ptr, cond, ".mt"); }

// CHECK-LABEL: @storec64_mf(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[TMP0:%.*]] = or i64 [[COND:%.*]], -256
// CHECK-NEXT:    [[TMP1:%.*]] = bitcast <2 x i32> [[A:%.*]] to <1 x i64>
// CHECK-NEXT:    [[TMP2:%.*]] = shufflevector <1 x i64> [[TMP1]], <1 x i64> poison, <4 x i32> <i32 0, i32 poison, i32 poison, i32 poison>
// CHECK-NEXT:    [[TMP3:%.*]] = shufflevector <4 x i64> [[TMP2]], <4 x i64> <i64 poison, i64 undef, i64 undef, i64 undef>, <4 x i32> <i32 0, i32 5, i32 6, i32 7>
// CHECK-NEXT:    tail call void (<4 x i64>, ptr, i32, i64, i32, i32, ...) @llvm.kvx.storec.v4i64.p0(<4 x i64> [[TMP3]], ptr [[PTR:%.*]], i32 256, i64 [[TMP0]], i32 -1, i32 5)
// CHECK-NEXT:    ret void
//
void storec64_mf(v2i32 a, void *ptr, unsigned long cond) { __builtin_kvx_storec64(a, ptr, cond, ".mf"); }

