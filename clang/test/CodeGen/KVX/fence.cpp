// NOTE: Assertions have been autogenerated by utils/update_cc_test_checks.py
// RUN: %clang_cc1 -x c++ -triple kvx-kalray-cos -target-cpu kv3-2 -S -O2 -emit-llvm -o - %s | FileCheck %s

// CHECK-LABEL: @_Z5fencev(
// CHECK-NEXT:  entry:
// CHECK-NEXT:    tail call void @llvm.kvx.fence(i32 0)
// CHECK-NEXT:    tail call void @llvm.kvx.fence(i32 0)
// CHECK-NEXT:    tail call void @llvm.kvx.fence(i32 0)
// CHECK-NEXT:    tail call void @llvm.kvx.fence(i32 1)
// CHECK-NEXT:    tail call void @llvm.kvx.fence(i32 2)
// CHECK-NEXT:    tail call void @llvm.kvx.fence(i32 3)
// CHECK-NEXT:    ret void
//
void fence(void) {
  __builtin_kvx_fence();
  __builtin_kvx_fence("");
  __builtin_kvx_fence(".all");
  __builtin_kvx_fence(".w");
  __builtin_kvx_fence(".r");
  __builtin_kvx_fence(".wa");
}
